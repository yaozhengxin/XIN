/* Zepto 1.2.0 - zepto event ajax form ie detect fx fx_methods data selector stack - zeptojs.com/license */
(function (global, factory) {
    if (typeof define === 'function' && define.amd)
        define(function () {
            return factory(global)
        })
    else
        factory(global)
}(this, function (window) {
    var Zepto = (function () {
        var undefined, key, $, classList, emptyArray = [], concat = emptyArray.concat, filter = emptyArray.filter, slice = emptyArray.slice,
            document = window.document,
            elementDisplay = {}, classCache = {},
            cssNumber = {
                'column-count': 1,
                'columns': 1,
                'font-weight': 1,
                'line-height': 1,
                'opacity': 1,
                'z-index': 1,
                'zoom': 1
            },
            fragmentRE = /^\s*<(\w+|!)[^>]*>/,
            singleTagRE = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
            tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
            rootNodeRE = /^(?:body|html)$/i,
            capitalRE = /([A-Z])/g,

            // special attributes that should be get/set via method calls
            methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],

            adjacencyOperators = ['after', 'prepend', 'before', 'append'],
            table = document.createElement('table'),
            tableRow = document.createElement('tr'),
            containers = {
                'tr': document.createElement('tbody'),
                'tbody': table, 'thead': table, 'tfoot': table,
                'td': tableRow, 'th': tableRow,
                '*': document.createElement('div')
            },
            readyRE = /complete|loaded|interactive/,
            simpleSelectorRE = /^[\w-]*$/,
            class2type = {},
            toString = class2type.toString,
            zepto = {},
            camelize, uniq,
            tempParent = document.createElement('div'),
            propMap = {
                'tabindex': 'tabIndex',
                'readonly': 'readOnly',
                'for': 'htmlFor',
                'class': 'className',
                'maxlength': 'maxLength',
                'cellspacing': 'cellSpacing',
                'cellpadding': 'cellPadding',
                'rowspan': 'rowSpan',
                'colspan': 'colSpan',
                'usemap': 'useMap',
                'frameborder': 'frameBorder',
                'contenteditable': 'contentEditable'
            },
            isArray = Array.isArray ||
                function (object) {
                    return object instanceof Array
                }

        zepto.matches = function (element, selector) {
            if (!selector || !element || element.nodeType !== 1) return false
            var matchesSelector = element.matches || element.webkitMatchesSelector ||
                element.mozMatchesSelector || element.oMatchesSelector ||
                element.matchesSelector
            if (matchesSelector) return matchesSelector.call(element, selector)
            // fall back to performing a selector:
            var match, parent = element.parentNode, temp = !parent
            if (temp) (parent = tempParent).appendChild(element)
            match = ~zepto.qsa(parent, selector).indexOf(element)
            temp && tempParent.removeChild(element)
            return match
        }

        function type(obj) {
            return obj == null ? String(obj) :
                class2type[toString.call(obj)] || "object"
        }

        function isFunction(value) {
            return type(value) == "function"
        }

        function isWindow(obj) {
            return obj != null && obj == obj.window
        }

        function isDocument(obj) {
            return obj != null && obj.nodeType == obj.DOCUMENT_NODE
        }

        function isObject(obj) {
            return type(obj) == "object"
        }

        function isPlainObject(obj) {
            return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype
        }

        function likeArray(obj) {
            var length = !!obj && 'length' in obj && obj.length,
                type = $.type(obj)

            return 'function' != type && !isWindow(obj) && (
                    'array' == type || length === 0 ||
                    (typeof length == 'number' && length > 0 && (length - 1) in obj)
                )
        }

        function compact(array) {
            return filter.call(array, function (item) {
                return item != null
            })
        }

        function flatten(array) {
            return array.length > 0 ? $.fn.concat.apply([], array) : array
        }

        camelize = function (str) {
            return str.replace(/-+(.)?/g, function (match, chr) {
                return chr ? chr.toUpperCase() : ''
            })
        }
        function dasherize(str) {
            return str.replace(/::/g, '/')
                .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')
                .replace(/([a-z\d])([A-Z])/g, '$1_$2')
                .replace(/_/g, '-')
                .toLowerCase()
        }

        uniq = function (array) {
            return filter.call(array, function (item, idx) {
                return array.indexOf(item) == idx
            })
        }

        function classRE(name) {
            return name in classCache ?
                classCache[name] : (classCache[name] = new RegExp('(^|\\s)' + name + '(\\s|$)'))
        }

        function maybeAddPx(name, value) {
            return (typeof value == "number" && !cssNumber[dasherize(name)]) ? value + "px" : value
        }

        function defaultDisplay(nodeName) {
            var element, display
            if (!elementDisplay[nodeName]) {
                element = document.createElement(nodeName)
                document.body.appendChild(element)
                display = getComputedStyle(element, '').getPropertyValue("display")
                element.parentNode.removeChild(element)
                display == "none" && (display = "block")
                elementDisplay[nodeName] = display
            }
            return elementDisplay[nodeName]
        }

        function children(element) {
            return 'children' in element ?
                slice.call(element.children) :
                $.map(element.childNodes, function (node) {
                    if (node.nodeType == 1) return node
                })
        }

        function Z(dom, selector) {
            var i, len = dom ? dom.length : 0
            for (i = 0; i < len; i++) this[i] = dom[i]
            this.length = len
            this.selector = selector || ''
        }

        // `$.zepto.fragment` takes a html string and an optional tag name
        // to generate DOM nodes from the given html string.
        // The generated DOM nodes are returned as an array.
        // This function can be overridden in plugins for example to make
        // it compatible with browsers that don't support the DOM fully.
        zepto.fragment = function (html, name, properties) {
            var dom, nodes, container

            // A special case optimization for a single tag
            if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1))

            if (!dom) {
                if (html.replace) html = html.replace(tagExpanderRE, "<$1></$2>")
                if (name === undefined) name = fragmentRE.test(html) && RegExp.$1
                if (!(name in containers)) name = '*'

                container = containers[name]
                container.innerHTML = '' + html
                dom = $.each(slice.call(container.childNodes), function () {
                    container.removeChild(this)
                })
            }

            if (isPlainObject(properties)) {
                nodes = $(dom)
                $.each(properties, function (key, value) {
                    if (methodAttributes.indexOf(key) > -1) nodes[key](value)
                    else nodes.attr(key, value)
                })
            }

            return dom
        }

        // `$.zepto.Z` swaps out the prototype of the given `dom` array
        // of nodes with `$.fn` and thus supplying all the Zepto functions
        // to the array. This method can be overridden in plugins.
        zepto.Z = function (dom, selector) {
            return new Z(dom, selector)
        }

        // `$.zepto.isZ` should return `true` if the given object is a Zepto
        // collection. This method can be overridden in plugins.
        zepto.isZ = function (object) {
            return object instanceof zepto.Z
        }

        // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and
        // takes a CSS selector and an optional context (and handles various
        // special cases).
        // This method can be overridden in plugins.
        zepto.init = function (selector, context) {
            var dom
            // If nothing given, return an empty Zepto collection
            if (!selector) return zepto.Z()
            // Optimize for string selectors
            else if (typeof selector == 'string') {
                selector = selector.trim()
                // If it's a html fragment, create nodes from it
                // Note: In both Chrome 21 and Firefox 15, DOM error 12
                // is thrown if the fragment doesn't begin with <
                if (selector[0] == '<' && fragmentRE.test(selector))
                    dom = zepto.fragment(selector, RegExp.$1, context), selector = null
                // If there's a context, create a collection on that context first, and select
                // nodes from there
                else if (context !== undefined) return $(context).find(selector)
                // If it's a CSS selector, use it to select nodes.
                else dom = zepto.qsa(document, selector)
            }
            // If a function is given, call it when the DOM is ready
            else if (isFunction(selector)) return $(document).ready(selector)
            // If a Zepto collection is given, just return it
            else if (zepto.isZ(selector)) return selector
            else {
                // normalize array if an array of nodes is given
                if (isArray(selector)) dom = compact(selector)
                // Wrap DOM nodes.
                else if (isObject(selector))
                    dom = [selector], selector = null
                // If it's a html fragment, create nodes from it
                else if (fragmentRE.test(selector))
                    dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null
                // If there's a context, create a collection on that context first, and select
                // nodes from there
                else if (context !== undefined) return $(context).find(selector)
                // And last but no least, if it's a CSS selector, use it to select nodes.
                else dom = zepto.qsa(document, selector)
            }
            // create a new Zepto collection from the nodes found
            return zepto.Z(dom, selector)
        }

        // `$` will be the base `Zepto` object. When calling this
        // function just call `$.zepto.init, which makes the implementation
        // details of selecting nodes and creating Zepto collections
        // patchable in plugins.
        $ = function (selector, context) {
            return zepto.init(selector, context)
        }

        function extend(target, source, deep) {
            for (key in source)
                if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {
                    if (isPlainObject(source[key]) && !isPlainObject(target[key]))
                        target[key] = {}
                    if (isArray(source[key]) && !isArray(target[key]))
                        target[key] = []
                    extend(target[key], source[key], deep)
                }
                else if (source[key] !== undefined) target[key] = source[key]
        }

        // Copy all but undefined properties from one or more
        // objects to the `target` object.
        $.extend = function (target) {
            var deep, args = slice.call(arguments, 1)
            if (typeof target == 'boolean') {
                deep = target
                target = args.shift()
            }
            args.forEach(function (arg) {
                extend(target, arg, deep)
            })
            return target
        }

        // `$.zepto.qsa` is Zepto's CSS selector implementation which
        // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.
        // This method can be overridden in plugins.
        zepto.qsa = function (element, selector) {
            var found,
                maybeID = selector[0] == '#',
                maybeClass = !maybeID && selector[0] == '.',
                nameOnly = maybeID || maybeClass ? selector.slice(1) : selector, // Ensure that a 1 char tag name still gets checked
                isSimple = simpleSelectorRE.test(nameOnly)
            return (element.getElementById && isSimple && maybeID) ? // Safari DocumentFragment doesn't have getElementById
                ( (found = element.getElementById(nameOnly)) ? [found] : [] ) :
                (element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11) ? [] :
                    slice.call(
                        isSimple && !maybeID && element.getElementsByClassName ? // DocumentFragment doesn't have getElementsByClassName/TagName
                            maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class
                                element.getElementsByTagName(selector) : // Or a tag
                            element.querySelectorAll(selector) // Or it's not simple, and we need to query all
                    )
        }

        function filtered(nodes, selector) {
            return selector == null ? $(nodes) : $(nodes).filter(selector)
        }

        $.contains = document.documentElement.contains ?
            function (parent, node) {
                return parent !== node && parent.contains(node)
            } :
            function (parent, node) {
                while (node && (node = node.parentNode))
                    if (node === parent) return true
                return false
            }

        function funcArg(context, arg, idx, payload) {
            return isFunction(arg) ? arg.call(context, idx, payload) : arg
        }

        function setAttribute(node, name, value) {
            value == null ? node.removeAttribute(name) : node.setAttribute(name, value)
        }

        // access className property while respecting SVGAnimatedString
        function className(node, value) {
            var klass = node.className || '',
                svg = klass && klass.baseVal !== undefined

            if (value === undefined) return svg ? klass.baseVal : klass
            svg ? (klass.baseVal = value) : (node.className = value)
        }

        // "true"  => true
        // "false" => false
        // "null"  => null
        // "42"    => 42
        // "42.5"  => 42.5
        // "08"    => "08"
        // JSON    => parse if valid
        // String  => self
        function deserializeValue(value) {
            try {
                return value ?
                    value == "true" ||
                    ( value == "false" ? false :
                        value == "null" ? null :
                            +value + "" == value ? +value :
                                /^[\[\{]/.test(value) ? $.parseJSON(value) :
                                    value )
                    : value
            } catch (e) {
                return value
            }
        }

        $.type = type
        $.isFunction = isFunction
        $.isWindow = isWindow
        $.isArray = isArray
        $.isPlainObject = isPlainObject

        $.isEmptyObject = function (obj) {
            var name
            for (name in obj) return false
            return true
        }

        $.isNumeric = function (val) {
            var num = Number(val), type = typeof val
            return val != null && type != 'boolean' &&
                (type != 'string' || val.length) && !isNaN(num) && isFinite(num) || false
        }

        $.inArray = function (elem, array, i) {
            return emptyArray.indexOf.call(array, elem, i)
        }

        $.camelCase = camelize
        $.trim = function (str) {
            return str == null ? "" : String.prototype.trim.call(str)
        }

        // plugin compatibility
        $.uuid = 0
        $.support = {}
        $.expr = {}
        $.noop = function () {
        }

        $.map = function (elements, callback) {
            var value, values = [], i, key
            if (likeArray(elements))
                for (i = 0; i < elements.length; i++) {
                    value = callback(elements[i], i)
                    if (value != null) values.push(value)
                }
            else
                for (key in elements) {
                    value = callback(elements[key], key)
                    if (value != null) values.push(value)
                }
            return flatten(values)
        }

        $.each = function (elements, callback) {
            var i, key
            if (likeArray(elements)) {
                for (i = 0; i < elements.length; i++)
                    if (callback.call(elements[i], i, elements[i]) === false) return elements
            } else {
                for (key in elements)
                    if (callback.call(elements[key], key, elements[key]) === false) return elements
            }

            return elements
        }

        $.grep = function (elements, callback) {
            return filter.call(elements, callback)
        }

        if (window.JSON) $.parseJSON = JSON.parse

        // Populate the class2type map
        $.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (i, name) {
            class2type["[object " + name + "]"] = name.toLowerCase()
        })

        // Define methods that will be available on all
        // Zepto collections
        $.fn = {
            constructor: zepto.Z,
            length: 0,

            // Because a collection acts like an array
            // copy over these useful array functions.
            forEach: emptyArray.forEach,
            reduce: emptyArray.reduce,
            push: emptyArray.push,
            sort: emptyArray.sort,
            splice: emptyArray.splice,
            indexOf: emptyArray.indexOf,
            concat: function () {
                var i, value, args = []
                for (i = 0; i < arguments.length; i++) {
                    value = arguments[i]
                    args[i] = zepto.isZ(value) ? value.toArray() : value
                }
                return concat.apply(zepto.isZ(this) ? this.toArray() : this, args)
            },

            // `map` and `slice` in the jQuery API work differently
            // from their array counterparts
            map: function (fn) {
                return $($.map(this, function (el, i) {
                    return fn.call(el, i, el)
                }))
            },
            slice: function () {
                return $(slice.apply(this, arguments))
            },

            ready: function (callback) {
                // need to check if document.body exists for IE as that browser reports
                // document ready when it hasn't yet created the body element
                if (readyRE.test(document.readyState) && document.body) callback($)
                else document.addEventListener('DOMContentLoaded', function () {
                    callback($)
                }, false)
                return this
            },
            get: function (idx) {
                return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]
            },
            toArray: function () {
                return this.get()
            },
            size: function () {
                return this.length
            },
            remove: function () {
                return this.each(function () {
                    if (this.parentNode != null)
                        this.parentNode.removeChild(this)
                })
            },
            each: function (callback) {
                emptyArray.every.call(this, function (el, idx) {
                    return callback.call(el, idx, el) !== false
                })
                return this
            },
            filter: function (selector) {
                if (isFunction(selector)) return this.not(this.not(selector))
                return $(filter.call(this, function (element) {
                    return zepto.matches(element, selector)
                }))
            },
            add: function (selector, context) {
                return $(uniq(this.concat($(selector, context))))
            },
            is: function (selector) {
                return this.length > 0 && zepto.matches(this[0], selector)
            },
            not: function (selector) {
                var nodes = []
                if (isFunction(selector) && selector.call !== undefined)
                    this.each(function (idx) {
                        if (!selector.call(this, idx)) nodes.push(this)
                    })
                else {
                    var excludes = typeof selector == 'string' ? this.filter(selector) :
                        (likeArray(selector) && isFunction(selector.item)) ? slice.call(selector) : $(selector)
                    this.forEach(function (el) {
                        if (excludes.indexOf(el) < 0) nodes.push(el)
                    })
                }
                return $(nodes)
            },
            has: function (selector) {
                return this.filter(function () {
                    return isObject(selector) ?
                        $.contains(this, selector) :
                        $(this).find(selector).size()
                })
            },
            eq: function (idx) {
                return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1)
            },
            first: function () {
                var el = this[0]
                return el && !isObject(el) ? el : $(el)
            },
            last: function () {
                var el = this[this.length - 1]
                return el && !isObject(el) ? el : $(el)
            },
            find: function (selector) {
                var result, $this = this
                if (!selector) result = $()
                else if (typeof selector == 'object')
                    result = $(selector).filter(function () {
                        var node = this
                        return emptyArray.some.call($this, function (parent) {
                            return $.contains(parent, node)
                        })
                    })
                else if (this.length == 1) result = $(zepto.qsa(this[0], selector))
                else result = this.map(function () {
                        return zepto.qsa(this, selector)
                    })
                return result
            },
            closest: function (selector, context) {
                var nodes = [], collection = typeof selector == 'object' && $(selector)
                this.each(function (_, node) {
                    while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector)))
                        node = node !== context && !isDocument(node) && node.parentNode
                    if (node && nodes.indexOf(node) < 0) nodes.push(node)
                })
                return $(nodes)
            },
            parents: function (selector) {
                var ancestors = [], nodes = this
                while (nodes.length > 0)
                    nodes = $.map(nodes, function (node) {
                        if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {
                            ancestors.push(node)
                            return node
                        }
                    })
                return filtered(ancestors, selector)
            },
            parent: function (selector) {
                return filtered(uniq(this.pluck('parentNode')), selector)
            },
            children: function (selector) {
                return filtered(this.map(function () {
                    return children(this)
                }), selector)
            },
            contents: function () {
                return this.map(function () {
                    return this.contentDocument || slice.call(this.childNodes)
                })
            },
            siblings: function (selector) {
                return filtered(this.map(function (i, el) {
                    return filter.call(children(el.parentNode), function (child) {
                        return child !== el
                    })
                }), selector)
            },
            empty: function () {
                return this.each(function () {
                    this.innerHTML = ''
                })
            },
            // `pluck` is borrowed from Prototype.js
            pluck: function (property) {
                return $.map(this, function (el) {
                    return el[property]
                })
            },
            show: function () {
                return this.each(function () {
                    this.style.display == "none" && (this.style.display = '')
                    if (getComputedStyle(this, '').getPropertyValue("display") == "none")
                        this.style.display = defaultDisplay(this.nodeName)
                })
            },
            replaceWith: function (newContent) {
                return this.before(newContent).remove()
            },
            wrap: function (structure) {
                var func = isFunction(structure)
                if (this[0] && !func)
                    var dom = $(structure).get(0),
                        clone = dom.parentNode || this.length > 1

                return this.each(function (index) {
                    $(this).wrapAll(
                        func ? structure.call(this, index) :
                            clone ? dom.cloneNode(true) : dom
                    )
                })
            },
            wrapAll: function (structure) {
                if (this[0]) {
                    $(this[0]).before(structure = $(structure))
                    var children
                    // drill down to the inmost element
                    while ((children = structure.children()).length) structure = children.first()
                    $(structure).append(this)
                }
                return this
            },
            wrapInner: function (structure) {
                var func = isFunction(structure)
                return this.each(function (index) {
                    var self = $(this), contents = self.contents(),
                        dom = func ? structure.call(this, index) : structure
                    contents.length ? contents.wrapAll(dom) : self.append(dom)
                })
            },
            unwrap: function () {
                this.parent().each(function () {
                    $(this).replaceWith($(this).children())
                })
                return this
            },
            clone: function () {
                return this.map(function () {
                    return this.cloneNode(true)
                })
            },
            hide: function () {
                return this.css("display", "none")
            },
            toggle: function (setting) {
                return this.each(function () {
                    var el = $(this)
                        ;
                    (setting === undefined ? el.css("display") == "none" : setting) ? el.show() : el.hide()
                })
            },
            prev: function (selector) {
                return $(this.pluck('previousElementSibling')).filter(selector || '*')
            },
            next: function (selector) {
                return $(this.pluck('nextElementSibling')).filter(selector || '*')
            },
            html: function (html) {
                return 0 in arguments ?
                    this.each(function (idx) {
                        var originHtml = this.innerHTML
                        $(this).empty().append(funcArg(this, html, idx, originHtml))
                    }) :
                    (0 in this ? this[0].innerHTML : null)
            },
            text: function (text) {
                return 0 in arguments ?
                    this.each(function (idx) {
                        var newText = funcArg(this, text, idx, this.textContent)
                        this.textContent = newText == null ? '' : '' + newText
                    }) :
                    (0 in this ? this.pluck('textContent').join("") : null)
            },
            attr: function (name, value) {
                var result
                return (typeof name == 'string' && !(1 in arguments)) ?
                    (0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined) :
                    this.each(function (idx) {
                        if (this.nodeType !== 1) return
                        if (isObject(name)) for (key in name) setAttribute(this, key, name[key])
                        else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)))
                    })
            },
            removeAttr: function (name) {
                return this.each(function () {
                    this.nodeType === 1 && name.split(' ').forEach(function (attribute) {
                        setAttribute(this, attribute)
                    }, this)
                })
            },
            prop: function (name, value) {
                name = propMap[name] || name
                return (1 in arguments) ?
                    this.each(function (idx) {
                        this[name] = funcArg(this, value, idx, this[name])
                    }) :
                    (this[0] && this[0][name])
            },
            removeProp: function (name) {
                name = propMap[name] || name
                return this.each(function () {
                    delete this[name]
                })
            },
            data: function (name, value) {
                var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase()

                var data = (1 in arguments) ?
                    this.attr(attrName, value) :
                    this.attr(attrName)

                return data !== null ? deserializeValue(data) : undefined
            },
            val: function (value) {
                if (0 in arguments) {
                    if (value == null) value = ""
                    return this.each(function (idx) {
                        this.value = funcArg(this, value, idx, this.value)
                    })
                } else {
                    return this[0] && (this[0].multiple ?
                            $(this[0]).find('option').filter(function () {
                                return this.selected
                            }).pluck('value') :
                            this[0].value)
                }
            },
            offset: function (coordinates) {
                if (coordinates) return this.each(function (index) {
                    var $this = $(this),
                        coords = funcArg(this, coordinates, index, $this.offset()),
                        parentOffset = $this.offsetParent().offset(),
                        props = {
                            top: coords.top - parentOffset.top,
                            left: coords.left - parentOffset.left
                        }

                    if ($this.css('position') == 'static') props['position'] = 'relative'
                    $this.css(props)
                })
                if (!this.length) return null
                if (document.documentElement !== this[0] && !$.contains(document.documentElement, this[0]))
                    return {top: 0, left: 0}
                var obj = this[0].getBoundingClientRect()
                return {
                    left: obj.left + window.pageXOffset,
                    top: obj.top + window.pageYOffset,
                    width: Math.round(obj.width),
                    height: Math.round(obj.height)
                }
            },
            css: function (property, value) {
                if (arguments.length < 2) {
                    var element = this[0]
                    if (typeof property == 'string') {
                        if (!element) return
                        return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property)
                    } else if (isArray(property)) {
                        if (!element) return
                        var props = {}
                        var computedStyle = getComputedStyle(element, '')
                        $.each(property, function (_, prop) {
                            props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))
                        })
                        return props
                    }
                }

                var css = ''
                if (type(property) == 'string') {
                    if (!value && value !== 0)
                        this.each(function () {
                            this.style.removeProperty(dasherize(property))
                        })
                    else
                        css = dasherize(property) + ":" + maybeAddPx(property, value)
                } else {
                    for (key in property)
                        if (!property[key] && property[key] !== 0)
                            this.each(function () {
                                this.style.removeProperty(dasherize(key))
                            })
                        else
                            css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';'
                }

                return this.each(function () {
                    this.style.cssText += ';' + css
                })
            },
            index: function (element) {
                return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0])
            },
            hasClass: function (name) {
                if (!name) return false
                return emptyArray.some.call(this, function (el) {
                    return this.test(className(el))
                }, classRE(name))
            },
            addClass: function (name) {
                if (!name) return this
                return this.each(function (idx) {
                    if (!('className' in this)) return
                    classList = []
                    var cls = className(this), newName = funcArg(this, name, idx, cls)
                    newName.split(/\s+/g).forEach(function (klass) {
                        if (!$(this).hasClass(klass)) classList.push(klass)
                    }, this)
                    classList.length && className(this, cls + (cls ? " " : "") + classList.join(" "))
                })
            },
            removeClass: function (name) {
                return this.each(function (idx) {
                    if (!('className' in this)) return
                    if (name === undefined) return className(this, '')
                    classList = className(this)
                    funcArg(this, name, idx, classList).split(/\s+/g).forEach(function (klass) {
                        classList = classList.replace(classRE(klass), " ")
                    })
                    className(this, classList.trim())
                })
            },
            toggleClass: function (name, when) {
                if (!name) return this
                return this.each(function (idx) {
                    var $this = $(this), names = funcArg(this, name, idx, className(this))
                    names.split(/\s+/g).forEach(function (klass) {
                        (when === undefined ? !$this.hasClass(klass) : when) ?
                            $this.addClass(klass) : $this.removeClass(klass)
                    })
                })
            },
            scrollTop: function (value) {
                if (!this.length) return
                var hasScrollTop = 'scrollTop' in this[0]
                if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset
                return this.each(hasScrollTop ?
                    function () {
                        this.scrollTop = value
                    } :
                    function () {
                        this.scrollTo(this.scrollX, value)
                    })
            },
            scrollLeft: function (value) {
                if (!this.length) return
                var hasScrollLeft = 'scrollLeft' in this[0]
                if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset
                return this.each(hasScrollLeft ?
                    function () {
                        this.scrollLeft = value
                    } :
                    function () {
                        this.scrollTo(value, this.scrollY)
                    })
            },
            position: function () {
                if (!this.length) return

                var elem = this[0],
                    // Get *real* offsetParent
                    offsetParent = this.offsetParent(),
                    // Get correct offsets
                    offset = this.offset(),
                    parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? {top: 0, left: 0} : offsetParent.offset()

                // Subtract element margins
                // note: when an element has margin: auto the offsetLeft and marginLeft
                // are the same in Safari causing offset.left to incorrectly be 0
                offset.top -= parseFloat($(elem).css('margin-top')) || 0
                offset.left -= parseFloat($(elem).css('margin-left')) || 0

                // Add offsetParent borders
                parentOffset.top += parseFloat($(offsetParent[0]).css('border-top-width')) || 0
                parentOffset.left += parseFloat($(offsetParent[0]).css('border-left-width')) || 0

                // Subtract the two offsets
                return {
                    top: offset.top - parentOffset.top,
                    left: offset.left - parentOffset.left
                }
            },
            offsetParent: function () {
                return this.map(function () {
                    var parent = this.offsetParent || document.body
                    while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css("position") == "static")
                        parent = parent.offsetParent
                    return parent
                })
            }
        }

        // for now
        $.fn.detach = $.fn.remove

        // Generate the `width` and `height` functions
        ;
        ['width', 'height'].forEach(function (dimension) {
            var dimensionProperty =
                dimension.replace(/./, function (m) {
                    return m[0].toUpperCase()
                })

            $.fn[dimension] = function (value) {
                var offset, el = this[0]
                if (value === undefined) return isWindow(el) ? el['inner' + dimensionProperty] :
                    isDocument(el) ? el.documentElement['scroll' + dimensionProperty] :
                        (offset = this.offset()) && offset[dimension]
                else return this.each(function (idx) {
                    el = $(this)
                    el.css(dimension, funcArg(this, value, idx, el[dimension]()))
                })
            }
        })

        function traverseNode(node, fun) {
            fun(node)
            for (var i = 0, len = node.childNodes.length; i < len; i++)
                traverseNode(node.childNodes[i], fun)
        }

        // Generate the `after`, `prepend`, `before`, `append`,
        // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.
        adjacencyOperators.forEach(function (operator, operatorIndex) {
            var inside = operatorIndex % 2 //=> prepend, append

            $.fn[operator] = function () {
                // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings
                var argType, nodes = $.map(arguments, function (arg) {
                        var arr = []
                        argType = type(arg)
                        if (argType == "array") {
                            arg.forEach(function (el) {
                                if (el.nodeType !== undefined) return arr.push(el)
                                else if ($.zepto.isZ(el)) return arr = arr.concat(el.get())
                                arr = arr.concat(zepto.fragment(el))
                            })
                            return arr
                        }
                        return argType == "object" || arg == null ?
                            arg : zepto.fragment(arg)
                    }),
                    parent, copyByClone = this.length > 1
                if (nodes.length < 1) return this

                return this.each(function (_, target) {
                    parent = inside ? target : target.parentNode

                    // convert all methods to a "before" operation
                    target = operatorIndex == 0 ? target.nextSibling :
                        operatorIndex == 1 ? target.firstChild :
                            operatorIndex == 2 ? target :
                                null

                    var parentInDocument = $.contains(document.documentElement, parent)

                    nodes.forEach(function (node) {
                        if (copyByClone) node = node.cloneNode(true)
                        else if (!parent) return $(node).remove()

                        parent.insertBefore(node, target)
                        if (parentInDocument) traverseNode(node, function (el) {
                            if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&
                                (!el.type || el.type === 'text/javascript') && !el.src) {
                                var target = el.ownerDocument ? el.ownerDocument.defaultView : window
                                target['eval'].call(target, el.innerHTML)
                            }
                        })
                    })
                })
            }

            // after    => insertAfter
            // prepend  => prependTo
            // before   => insertBefore
            // append   => appendTo
            $.fn[inside ? operator + 'To' : 'insert' + (operatorIndex ? 'Before' : 'After')] = function (html) {
                $(html)[operator](this)
                return this
            }
        })

        zepto.Z.prototype = Z.prototype = $.fn

        // Export internal API functions in the `$.zepto` namespace
        zepto.uniq = uniq
        zepto.deserializeValue = deserializeValue
        $.zepto = zepto

        return $
    })()

    window.Zepto = Zepto
    window.$ === undefined && (window.$ = Zepto)

    ;
    (function ($) {
        var _zid = 1, undefined,
            slice = Array.prototype.slice,
            isFunction = $.isFunction,
            isString = function (obj) {
                return typeof obj == 'string'
            },
            handlers = {},
            specialEvents = {},
            focusinSupported = 'onfocusin' in window,
            focus = {focus: 'focusin', blur: 'focusout'},
            hover = {mouseenter: 'mouseover', mouseleave: 'mouseout'}

        specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents'

        function zid(element) {
            return element._zid || (element._zid = _zid++)
        }

        function findHandlers(element, event, fn, selector) {
            event = parse(event)
            if (event.ns) var matcher = matcherFor(event.ns)
            return (handlers[zid(element)] || []).filter(function (handler) {
                return handler
                    && (!event.e || handler.e == event.e)
                    && (!event.ns || matcher.test(handler.ns))
                    && (!fn || zid(handler.fn) === zid(fn))
                    && (!selector || handler.sel == selector)
            })
        }

        function parse(event) {
            var parts = ('' + event).split('.')
            return {e: parts[0], ns: parts.slice(1).sort().join(' ')}
        }

        function matcherFor(ns) {
            return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)')
        }

        function eventCapture(handler, captureSetting) {
            return handler.del &&
                (!focusinSupported && (handler.e in focus)) || !!captureSetting
        }

        function realEvent(type) {
            return hover[type] || (focusinSupported && focus[type]) || type
        }

        function add(element, events, fn, data, selector, delegator, capture) {
            var id = zid(element), set = (handlers[id] || (handlers[id] = []))
            events.split(/\s/).forEach(function (event) {
                if (event == 'ready') return $(document).ready(fn)
                var handler = parse(event)
                handler.fn = fn
                handler.sel = selector
                // emulate mouseenter, mouseleave
                if (handler.e in hover) fn = function (e) {
                    var related = e.relatedTarget
                    if (!related || (related !== this && !$.contains(this, related)))
                        return handler.fn.apply(this, arguments)
                }
                handler.del = delegator
                var callback = delegator || fn
                handler.proxy = function (e) {
                    e = compatible(e)
                    if (e.isImmediatePropagationStopped()) return
                    e.data = data
                    var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args))
                    if (result === false) e.preventDefault(), e.stopPropagation()
                    return result
                }
                handler.i = set.length
                set.push(handler)
                if ('addEventListener' in element)
                    element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))
            })
        }

        function remove(element, events, fn, selector, capture) {
            var id = zid(element)
                ;
            (events || '').split(/\s/).forEach(function (event) {
                findHandlers(element, event, fn, selector).forEach(function (handler) {
                    delete handlers[id][handler.i]
                    if ('removeEventListener' in element)
                        element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))
                })
            })
        }

        $.event = {add: add, remove: remove}

        $.proxy = function (fn, context) {
            var args = (2 in arguments) && slice.call(arguments, 2)
            if (isFunction(fn)) {
                var proxyFn = function () {
                    return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments)
                }
                proxyFn._zid = zid(fn)
                return proxyFn
            } else if (isString(context)) {
                if (args) {
                    args.unshift(fn[context], fn)
                    return $.proxy.apply(null, args)
                } else {
                    return $.proxy(fn[context], fn)
                }
            } else {
                throw new TypeError("expected function")
            }
        }

        $.fn.bind = function (event, data, callback) {
            return this.on(event, data, callback)
        }
        $.fn.unbind = function (event, callback) {
            return this.off(event, callback)
        }
        $.fn.one = function (event, selector, data, callback) {
            return this.on(event, selector, data, callback, 1)
        }

        var returnTrue = function () {
                return true
            },
            returnFalse = function () {
                return false
            },
            ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,
            eventMethods = {
                preventDefault: 'isDefaultPrevented',
                stopImmediatePropagation: 'isImmediatePropagationStopped',
                stopPropagation: 'isPropagationStopped'
            }

        function compatible(event, source) {
            if (source || !event.isDefaultPrevented) {
                source || (source = event)

                $.each(eventMethods, function (name, predicate) {
                    var sourceMethod = source[name]
                    event[name] = function () {
                        this[predicate] = returnTrue
                        return sourceMethod && sourceMethod.apply(source, arguments)
                    }
                    event[predicate] = returnFalse
                })

                event.timeStamp || (event.timeStamp = Date.now())

                if (source.defaultPrevented !== undefined ? source.defaultPrevented :
                        'returnValue' in source ? source.returnValue === false :
                            source.getPreventDefault && source.getPreventDefault())
                    event.isDefaultPrevented = returnTrue
            }
            return event
        }

        function createProxy(event) {
            var key, proxy = {originalEvent: event}
            for (key in event)
                if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key]

            return compatible(proxy, event)
        }

        $.fn.delegate = function (selector, event, callback) {
            return this.on(event, selector, callback)
        }
        $.fn.undelegate = function (selector, event, callback) {
            return this.off(event, selector, callback)
        }

        $.fn.live = function (event, callback) {
            $(document.body).delegate(this.selector, event, callback)
            return this
        }
        $.fn.die = function (event, callback) {
            $(document.body).undelegate(this.selector, event, callback)
            return this
        }

        $.fn.on = function (event, selector, data, callback, one) {
            var autoRemove, delegator, $this = this
            if (event && !isString(event)) {
                $.each(event, function (type, fn) {
                    $this.on(type, selector, data, fn, one)
                })
                return $this
            }

            if (!isString(selector) && !isFunction(callback) && callback !== false)
                callback = data, data = selector, selector = undefined
            if (callback === undefined || data === false)
                callback = data, data = undefined

            if (callback === false) callback = returnFalse

            return $this.each(function (_, element) {
                if (one) autoRemove = function (e) {
                    remove(element, e.type, callback)
                    return callback.apply(this, arguments)
                }

                if (selector) delegator = function (e) {
                    var evt, match = $(e.target).closest(selector, element).get(0)
                    if (match && match !== element) {
                        evt = $.extend(createProxy(e), {currentTarget: match, liveFired: element})
                        return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)))
                    }
                }

                add(element, event, callback, data, selector, delegator || autoRemove)
            })
        }
        $.fn.off = function (event, selector, callback) {
            var $this = this
            if (event && !isString(event)) {
                $.each(event, function (type, fn) {
                    $this.off(type, selector, fn)
                })
                return $this
            }

            if (!isString(selector) && !isFunction(callback) && callback !== false)
                callback = selector, selector = undefined

            if (callback === false) callback = returnFalse

            return $this.each(function () {
                remove(this, event, callback, selector)
            })
        }

        $.fn.trigger = function (event, args) {
            event = (isString(event) || $.isPlainObject(event)) ? $.Event(event) : compatible(event)
            event._args = args
            return this.each(function () {
                // handle focus(), blur() by calling them directly
                if (event.type in focus && typeof this[event.type] == "function") this[event.type]()
                // items in the collection might not be DOM elements
                else if ('dispatchEvent' in this) this.dispatchEvent(event)
                else $(this).triggerHandler(event, args)
            })
        }

        // triggers event handlers on current element just as if an event occurred,
        // doesn't trigger an actual event, doesn't bubble
        $.fn.triggerHandler = function (event, args) {
            var e, result
            this.each(function (i, element) {
                e = createProxy(isString(event) ? $.Event(event) : event)
                e._args = args
                e.target = element
                $.each(findHandlers(element, event.type || event), function (i, handler) {
                    result = handler.proxy(e)
                    if (e.isImmediatePropagationStopped()) return false
                })
            })
            return result
        }

        // shortcut methods for `.bind(event, fn)` for each event type
        ;
        ('focusin focusout focus blur load resize scroll unload click dblclick ' +
        'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' +
        'change select keydown keypress keyup error').split(' ').forEach(function (event) {
            $.fn[event] = function (callback) {
                return (0 in arguments) ?
                    this.bind(event, callback) :
                    this.trigger(event)
            }
        })

        $.Event = function (type, props) {
            if (!isString(type)) props = type, type = props.type
            var event = document.createEvent(specialEvents[type] || 'Events'), bubbles = true
            if (props) for (var name in props) (name == 'bubbles') ? (bubbles = !!props[name]) : (event[name] = props[name])
            event.initEvent(type, bubbles, true)
            return compatible(event)
        }

    })(Zepto)

    ;
    (function ($) {
        var jsonpID = +new Date(),
            document = window.document,
            key,
            name,
            rscript = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
            scriptTypeRE = /^(?:text|application)\/javascript/i,
            xmlTypeRE = /^(?:text|application)\/xml/i,
            jsonType = 'application/json',
            htmlType = 'text/html',
            blankRE = /^\s*$/,
            originAnchor = document.createElement('a')

        originAnchor.href = window.location.href

        // trigger a custom event and return false if it was cancelled
        function triggerAndReturn(context, eventName, data) {
            var event = $.Event(eventName)
            $(context).trigger(event, data)
            return !event.isDefaultPrevented()
        }

        // trigger an Ajax "global" event
        function triggerGlobal(settings, context, eventName, data) {
            if (settings.global) return triggerAndReturn(context || document, eventName, data)
        }

        // Number of active Ajax requests
        $.active = 0

        function ajaxStart(settings) {
            if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')
        }

        function ajaxStop(settings) {
            if (settings.global && !(--$.active)) triggerGlobal(settings, null, 'ajaxStop')
        }

        // triggers an extra global event "ajaxBeforeSend" that's like "ajaxSend" but cancelable
        function ajaxBeforeSend(xhr, settings) {
            var context = settings.context
            if (settings.beforeSend.call(context, xhr, settings) === false ||
                triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)
                return false

            triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])
        }

        function ajaxSuccess(data, xhr, settings, deferred) {
            var context = settings.context, status = 'success'
            settings.success.call(context, data, status, xhr)
            if (deferred) deferred.resolveWith(context, [data, status, xhr])
            triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])
            ajaxComplete(status, xhr, settings)
        }

        // type: "timeout", "error", "abort", "parsererror"
        function ajaxError(error, type, xhr, settings, deferred) {
            var context = settings.context
            settings.error.call(context, xhr, type, error)
            if (deferred) deferred.rejectWith(context, [xhr, type, error])
            triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type])
            ajaxComplete(type, xhr, settings)
        }

        // status: "success", "notmodified", "error", "timeout", "abort", "parsererror"
        function ajaxComplete(status, xhr, settings) {
            var context = settings.context
            settings.complete.call(context, xhr, status)
            triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])
            ajaxStop(settings)
        }

        function ajaxDataFilter(data, type, settings) {
            if (settings.dataFilter == empty) return data
            var context = settings.context
            return settings.dataFilter.call(context, data, type)
        }

        // Empty function, used as default callback
        function empty() {
        }

        $.ajaxJSONP = function (options, deferred) {
            if (!('type' in options)) return $.ajax(options)

            var _callbackName = options.jsonpCallback,
                callbackName = ($.isFunction(_callbackName) ?
                        _callbackName() : _callbackName) || ('Zepto' + (jsonpID++)),
                script = document.createElement('script'),
                originalCallback = window[callbackName],
                responseData,
                abort = function (errorType) {
                    $(script).triggerHandler('error', errorType || 'abort')
                },
                xhr = {abort: abort}, abortTimeout

            if (deferred) deferred.promise(xhr)

            $(script).on('load error', function (e, errorType) {
                clearTimeout(abortTimeout)
                $(script).off().remove()

                if (e.type == 'error' || !responseData) {
                    ajaxError(null, errorType || 'error', xhr, options, deferred)
                } else {
                    ajaxSuccess(responseData[0], xhr, options, deferred)
                }

                window[callbackName] = originalCallback
                if (responseData && $.isFunction(originalCallback))
                    originalCallback(responseData[0])

                originalCallback = responseData = undefined
            })

            if (ajaxBeforeSend(xhr, options) === false) {
                abort('abort')
                return xhr
            }

            window[callbackName] = function () {
                responseData = arguments
            }

            script.src = options.url.replace(/\?(.+)=\?/, '?$1=' + callbackName)
            document.head.appendChild(script)

            if (options.timeout > 0) abortTimeout = setTimeout(function () {
                abort('timeout')
            }, options.timeout)

            return xhr
        }

        $.ajaxSettings = {
            // Default type of request
            type: 'GET',
            // Callback that is executed before request
            beforeSend: empty,
            // Callback that is executed if the request succeeds
            success: empty,
            // Callback that is executed the the server drops error
            error: empty,
            // Callback that is executed on request complete (both: error and success)
            complete: empty,
            // The context for the callbacks
            context: null,
            // Whether to trigger "global" Ajax events
            global: true,
            // Transport
            xhr: function () {
                return new window.XMLHttpRequest()
            },
            // MIME types mapping
            // IIS returns Javascript as "application/x-javascript"
            accepts: {
                script: 'text/javascript, application/javascript, application/x-javascript',
                json: jsonType,
                xml: 'application/xml, text/xml',
                html: htmlType,
                text: 'text/plain'
            },
            // Whether the request is to another domain
            crossDomain: false,
            // Default timeout
            timeout: 0,
            // Whether data should be serialized to string
            processData: true,
            // Whether the browser should be allowed to cache GET responses
            cache: true,
            //Used to handle the raw response data of XMLHttpRequest.
            //This is a pre-filtering function to sanitize the response.
            //The sanitized response should be returned
            dataFilter: empty
        }

        function mimeToDataType(mime) {
            if (mime) mime = mime.split(';', 2)[0]
            return mime && ( mime == htmlType ? 'html' :
                    mime == jsonType ? 'json' :
                        scriptTypeRE.test(mime) ? 'script' :
                            xmlTypeRE.test(mime) && 'xml' ) || 'text'
        }

        function appendQuery(url, query) {
            if (query == '') return url
            return (url + '&' + query).replace(/[&?]{1,2}/, '?')
        }

        // serialize payload and append it to the URL for GET requests
        function serializeData(options) {
            if (options.processData && options.data && $.type(options.data) != "string")
                options.data = $.param(options.data, options.traditional)
            if (options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType))
                options.url = appendQuery(options.url, options.data), options.data = undefined
        }

        $.ajax = function (options) {
            var settings = $.extend({}, options || {}),
                deferred = $.Deferred && $.Deferred(),
                urlAnchor, hashIndex
            for (key in $.ajaxSettings) if (settings[key] === undefined) settings[key] = $.ajaxSettings[key]

            ajaxStart(settings)

            if (!settings.crossDomain) {
                urlAnchor = document.createElement('a')
                urlAnchor.href = settings.url
                // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049
                urlAnchor.href = urlAnchor.href
                settings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host)
            }

            if (!settings.url) settings.url = window.location.toString()
            if ((hashIndex = settings.url.indexOf('#')) > -1) settings.url = settings.url.slice(0, hashIndex)
            serializeData(settings)

            var dataType = settings.dataType, hasPlaceholder = /\?.+=\?/.test(settings.url)
            if (hasPlaceholder) dataType = 'jsonp'

            if (settings.cache === false || (
                    (!options || options.cache !== true) &&
                    ('script' == dataType || 'jsonp' == dataType)
                ))
                settings.url = appendQuery(settings.url, '_=' + Date.now())

            if ('jsonp' == dataType) {
                if (!hasPlaceholder)
                    settings.url = appendQuery(settings.url,
                        settings.jsonp ? (settings.jsonp + '=?') : settings.jsonp === false ? '' : 'callback=?')
                return $.ajaxJSONP(settings, deferred)
            }

            var mime = settings.accepts[dataType],
                headers = {},
                setHeader = function (name, value) {
                    headers[name.toLowerCase()] = [name, value]
                },
                protocol = /^([\w-]+:)\/\//.test(settings.url) ? RegExp.$1 : window.location.protocol,
                xhr = settings.xhr(),
                nativeSetHeader = xhr.setRequestHeader,
                abortTimeout

            if (deferred) deferred.promise(xhr)

            if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest')
            setHeader('Accept', mime || '*/*')
            if (mime = settings.mimeType || mime) {
                if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]
                xhr.overrideMimeType && xhr.overrideMimeType(mime)
            }
            if (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET'))
                setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded')

            if (settings.headers) for (name in settings.headers) setHeader(name, settings.headers[name])
            xhr.setRequestHeader = setHeader

            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4) {
                    xhr.onreadystatechange = empty
                    clearTimeout(abortTimeout)
                    var result, error = false
                    if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {
                        dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'))

                        if (xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob')
                            result = xhr.response
                        else {
                            result = xhr.responseText

                            try {
                                // http://perfectionkills.com/global-eval-what-are-the-options/
                                // sanitize response accordingly if data filter callback provided
                                result = ajaxDataFilter(result, dataType, settings)
                                if (dataType == 'script') (1, eval)(result)
                                else if (dataType == 'xml') result = xhr.responseXML
                                else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result)
                            } catch (e) {
                                error = e
                            }

                            if (error) return ajaxError(error, 'parsererror', xhr, settings, deferred)
                        }

                        ajaxSuccess(result, xhr, settings, deferred)
                    } else {
                        ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred)
                    }
                }
            }

            if (ajaxBeforeSend(xhr, settings) === false) {
                xhr.abort()
                ajaxError(null, 'abort', xhr, settings, deferred)
                return xhr
            }

            var async = 'async' in settings ? settings.async : true
            xhr.open(settings.type, settings.url, async, settings.username, settings.password)

            if (settings.xhrFields) for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name]

            for (name in headers) nativeSetHeader.apply(xhr, headers[name])

            if (settings.timeout > 0) abortTimeout = setTimeout(function () {
                xhr.onreadystatechange = empty
                xhr.abort()
                ajaxError(null, 'timeout', xhr, settings, deferred)
            }, settings.timeout)

            // avoid sending empty string (#319)
            xhr.send(settings.data ? settings.data : null)
            return xhr
        }

        // handle optional data/success arguments
        function parseArguments(url, data, success, dataType) {
            if ($.isFunction(data)) dataType = success, success = data, data = undefined
            if (!$.isFunction(success)) dataType = success, success = undefined
            return {
                url: url
                , data: data
                , success: success
                , dataType: dataType
            }
        }

        $.get = function (/* url, data, success, dataType */) {
            return $.ajax(parseArguments.apply(null, arguments))
        }

        $.post = function (/* url, data, success, dataType */) {
            var options = parseArguments.apply(null, arguments)
            options.type = 'POST'
            return $.ajax(options)
        }

        $.getJSON = function (/* url, data, success */) {
            var options = parseArguments.apply(null, arguments)
            options.dataType = 'json'
            return $.ajax(options)
        }

        $.fn.load = function (url, data, success) {
            if (!this.length) return this
            var self = this, parts = url.split(/\s/), selector,
                options = parseArguments(url, data, success),
                callback = options.success
            if (parts.length > 1) options.url = parts[0], selector = parts[1]
            options.success = function (response) {
                self.html(selector ?
                    $('<div>').html(response.replace(rscript, "")).find(selector)
                    : response)
                callback && callback.apply(self, arguments)
            }
            $.ajax(options)
            return this
        }

        var escape = encodeURIComponent

        function serialize(params, obj, traditional, scope) {
            var type, array = $.isArray(obj), hash = $.isPlainObject(obj)
            $.each(obj, function (key, value) {
                type = $.type(value)
                if (scope) key = traditional ? scope :
                    scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'
                // handle data in serializeArray() format
                if (!scope && array) params.add(value.name, value.value)
                // recurse into nested objects
                else if (type == "array" || (!traditional && type == "object"))
                    serialize(params, value, traditional, key)
                else params.add(key, value)
            })
        }

        $.param = function (obj, traditional) {
            var params = []
            params.add = function (key, value) {
                if ($.isFunction(value)) value = value()
                if (value == null) value = ""
                this.push(escape(key) + '=' + escape(value))
            }
            serialize(params, obj, traditional)
            return params.join('&').replace(/%20/g, '+')
        }
    })(Zepto)

    ;
    (function ($) {
        $.fn.serializeArray = function () {
            var name, type, result = [],
                add = function (value) {
                    if (value.forEach) return value.forEach(add)
                    result.push({name: name, value: value})
                }
            if (this[0]) $.each(this[0].elements, function (_, field) {
                type = field.type, name = field.name
                if (name && field.nodeName.toLowerCase() != 'fieldset' && !field.disabled && type != 'submit' && type != 'reset' && type != 'button' && type != 'file' &&
                    ((type != 'radio' && type != 'checkbox') || field.checked))
                    add($(field).val())
            })
            return result
        }

        $.fn.serialize = function () {
            var result = []
            this.serializeArray().forEach(function (elm) {
                result.push(encodeURIComponent(elm.name) + '=' + encodeURIComponent(elm.value))
            })
            return result.join('&')
        }

        $.fn.submit = function (callback) {
            if (0 in arguments) this.bind('submit', callback)
            else if (this.length) {
                var event = $.Event('submit')
                this.eq(0).trigger(event)
                if (!event.isDefaultPrevented()) this.get(0).submit()
            }
            return this
        }

    })(Zepto)

    ;
    (function ($, undefined) {
        var prefix = '', eventPrefix,
            vendors = {Webkit: 'webkit', Moz: '', O: 'o'},
            testEl = document.createElement('div'),
            supportedTransforms = /^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,
            transform,
            transitionProperty, transitionDuration, transitionTiming, transitionDelay,
            animationName, animationDuration, animationTiming, animationDelay,
            cssReset = {}

        function dasherize(str) {
            return str.replace(/([A-Z])/g, '-$1').toLowerCase()
        }

        function normalizeEvent(name) {
            return eventPrefix ? eventPrefix + name : name.toLowerCase()
        }

        if (testEl.style.transform === undefined) $.each(vendors, function (vendor, event) {
            if (testEl.style[vendor + 'TransitionProperty'] !== undefined) {
                prefix = '-' + vendor.toLowerCase() + '-'
                eventPrefix = event
                return false
            }
        })

        transform = prefix + 'transform'
        cssReset[transitionProperty = prefix + 'transition-property'] =
            cssReset[transitionDuration = prefix + 'transition-duration'] =
                cssReset[transitionDelay = prefix + 'transition-delay'] =
                    cssReset[transitionTiming = prefix + 'transition-timing-function'] =
                        cssReset[animationName = prefix + 'animation-name'] =
                            cssReset[animationDuration = prefix + 'animation-duration'] =
                                cssReset[animationDelay = prefix + 'animation-delay'] =
                                    cssReset[animationTiming = prefix + 'animation-timing-function'] = ''

        $.fx = {
            off: (eventPrefix === undefined && testEl.style.transitionProperty === undefined),
            speeds: {_default: 400, fast: 200, slow: 600},
            cssPrefix: prefix,
            transitionEnd: normalizeEvent('TransitionEnd'),
            animationEnd: normalizeEvent('AnimationEnd')
        }

        $.fn.animate = function (properties, duration, ease, callback, delay) {
            if ($.isFunction(duration))
                callback = duration, ease = undefined, duration = undefined
            if ($.isFunction(ease))
                callback = ease, ease = undefined
            if ($.isPlainObject(duration))
                ease = duration.easing, callback = duration.complete, delay = duration.delay, duration = duration.duration
            if (duration) duration = (typeof duration == 'number' ? duration :
                    ($.fx.speeds[duration] || $.fx.speeds._default)) / 1000
            if (delay) delay = parseFloat(delay) / 1000
            return this.anim(properties, duration, ease, callback, delay)
        }

        $.fn.anim = function (properties, duration, ease, callback, delay) {
            var key, cssValues = {}, cssProperties, transforms = '',
                that = this, wrappedCallback, endEvent = $.fx.transitionEnd,
                fired = false

            if (duration === undefined) duration = $.fx.speeds._default / 1000
            if (delay === undefined) delay = 0
            if ($.fx.off) duration = 0

            if (typeof properties == 'string') {
                // keyframe animation
                cssValues[animationName] = properties
                cssValues[animationDuration] = duration + 's'
                cssValues[animationDelay] = delay + 's'
                cssValues[animationTiming] = (ease || 'linear')
                endEvent = $.fx.animationEnd
            } else {
                cssProperties = []
                // CSS transitions
                for (key in properties)
                    if (supportedTransforms.test(key)) transforms += key + '(' + properties[key] + ') '
                    else cssValues[key] = properties[key], cssProperties.push(dasherize(key))

                if (transforms) cssValues[transform] = transforms, cssProperties.push(transform)
                if (duration > 0 && typeof properties === 'object') {
                    cssValues[transitionProperty] = cssProperties.join(', ')
                    cssValues[transitionDuration] = duration + 's'
                    cssValues[transitionDelay] = delay + 's'
                    cssValues[transitionTiming] = (ease || 'linear')
                }
            }

            wrappedCallback = function (event) {
                if (typeof event !== 'undefined') {
                    if (event.target !== event.currentTarget) return // makes sure the event didn't bubble from "below"
                    $(event.target).unbind(endEvent, wrappedCallback)
                } else
                    $(this).unbind(endEvent, wrappedCallback) // triggered by setTimeout

                fired = true
                $(this).css(cssReset)
                callback && callback.call(this)
            }
            if (duration > 0) {
                this.bind(endEvent, wrappedCallback)
                // transitionEnd is not always firing on older Android phones
                // so make sure it gets fired
                setTimeout(function () {
                    if (fired) return
                    wrappedCallback.call(that)
                }, ((duration + delay) * 1000) + 25)
            }

            // trigger page reflow so new elements can animate
            this.size() && this.get(0).clientLeft

            this.css(cssValues)

            if (duration <= 0) setTimeout(function () {
                that.each(function () {
                    wrappedCallback.call(this)
                })
            }, 0)

            return this
        }

        testEl = null
    })(Zepto)

    ;
    (function () {
        // getComputedStyle shouldn't freak out when called
        // without a valid element as argument
        try {
            getComputedStyle(undefined)
        } catch (e) {
            var nativeGetComputedStyle = getComputedStyle
            window.getComputedStyle = function (element, pseudoElement) {
                try {
                    return nativeGetComputedStyle(element, pseudoElement)
                } catch (e) {
                    return null
                }
            }
        }
    })()


    //扩展$.Callbacks
    ;
    (function ($) {
        // Create a collection of callbacks to be fired in a sequence, with configurable behaviour
        // Option flags:
        //   - once: Callbacks fired at most one time.
        //   - memory: Remember the most recent context and arguments
        //   - stopOnFalse: Cease iterating over callback list
        //   - unique: Permit adding at most one instance of the same callback
        $.Callbacks = function (options) {
            options = $.extend({}, options)

            var memory, // Last fire value (for non-forgettable lists)
                fired,  // Flag to know if list was already fired
                firing, // Flag to know if list is currently firing
                firingStart, // First callback to fire (used internally by add and fireWith)
                firingLength, // End of the loop when firing
                firingIndex, // Index of currently firing callback (modified by remove if needed)
                list = [], // Actual callback list
                stack = !options.once && [], // Stack of fire calls for repeatable lists
                fire = function (data) {
                    memory = options.memory && data
                    fired = true
                    firingIndex = firingStart || 0
                    firingStart = 0
                    firingLength = list.length
                    firing = true
                    for (; list && firingIndex < firingLength; ++firingIndex) {
                        if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {
                            memory = false
                            break
                        }
                    }
                    firing = false
                    if (list) {
                        if (stack) stack.length && fire(stack.shift())
                        else if (memory) list.length = 0
                        else Callbacks.disable()
                    }
                },

                Callbacks = {
                    add: function () {
                        if (list) {
                            var start = list.length,
                                add = function (args) {
                                    $.each(args, function (_, arg) {
                                        if (typeof arg === "function") {
                                            if (!options.unique || !Callbacks.has(arg)) list.push(arg)
                                        }
                                        else if (arg && arg.length && typeof arg !== 'string') add(arg)
                                    })
                                }
                            add(arguments)
                            if (firing) firingLength = list.length
                            else if (memory) {
                                firingStart = start
                                fire(memory)
                            }
                        }
                        return this
                    },
                    remove: function () {
                        if (list) {
                            $.each(arguments, function (_, arg) {
                                var index
                                while ((index = $.inArray(arg, list, index)) > -1) {
                                    list.splice(index, 1)
                                    // Handle firing indexes
                                    if (firing) {
                                        if (index <= firingLength) --firingLength
                                        if (index <= firingIndex) --firingIndex
                                    }
                                }
                            })
                        }
                        return this
                    },
                    has: function (fn) {
                        return !!(list && (fn ? $.inArray(fn, list) > -1 : list.length))
                    },
                    empty: function () {
                        firingLength = list.length = 0
                        return this
                    },
                    disable: function () {
                        list = stack = memory = undefined
                        return this
                    },
                    disabled: function () {
                        return !list
                    },
                    lock: function () {
                        stack = undefined
                        if (!memory) Callbacks.disable()
                        return this
                    },
                    locked: function () {
                        return !stack
                    },
                    fireWith: function (context, args) {
                        if (list && (!fired || stack)) {
                            args = args || []
                            args = [context, args.slice ? args.slice() : args]
                            if (firing) stack.push(args)
                            else fire(args)
                        }
                        return this
                    },
                    fire: function () {
                        return Callbacks.fireWith(this, arguments)
                    },
                    fired: function () {
                        return !!fired
                    }
                }

            return Callbacks
        }
    })(Zepto)

    //扩展promise
    ;
    (function ($) {
        var slice = Array.prototype.slice

        function Deferred(func) {
            var tuples = [
                    // action, add listener, listener list, final state
                    ["resolve", "done", $.Callbacks({once: 1, memory: 1}), "resolved"],
                    ["reject", "fail", $.Callbacks({once: 1, memory: 1}), "rejected"],
                    ["notify", "progress", $.Callbacks({memory: 1})]
                ],
                state = "pending",
                promise = {
                    state: function () {
                        return state
                    },
                    always: function () {
                        deferred.done(arguments).fail(arguments)
                        return this
                    },
                    then: function (/* fnDone [, fnFailed [, fnProgress]] */) {
                        var fns = arguments
                        return Deferred(function (defer) {
                            $.each(tuples, function (i, tuple) {
                                var fn = $.isFunction(fns[i]) && fns[i]
                                deferred[tuple[1]](function () {
                                    var returned = fn && fn.apply(this, arguments)
                                    if (returned && $.isFunction(returned.promise)) {
                                        returned.promise()
                                            .done(defer.resolve)
                                            .fail(defer.reject)
                                            .progress(defer.notify)
                                    } else {
                                        var context = this === promise ? defer.promise() : this,
                                            values = fn ? [returned] : arguments
                                        defer[tuple[0] + "With"](context, values)
                                    }
                                })
                            })
                            fns = null
                        }).promise()
                    },

                    promise: function (obj) {
                        return obj != null ? $.extend(obj, promise) : promise
                    }
                },
                deferred = {}

            $.each(tuples, function (i, tuple) {
                var list = tuple[2],
                    stateString = tuple[3]

                promise[tuple[1]] = list.add

                if (stateString) {
                    list.add(function () {
                        state = stateString
                    }, tuples[i ^ 1][2].disable, tuples[2][2].lock)
                }

                deferred[tuple[0]] = function () {
                    deferred[tuple[0] + "With"](this === deferred ? promise : this, arguments)
                    return this
                }
                deferred[tuple[0] + "With"] = list.fireWith
            })

            promise.promise(deferred)
            if (func) func.call(deferred, deferred)
            return deferred
        }

        $.when = function (sub) {
            var resolveValues = slice.call(arguments),
                len = resolveValues.length,
                i = 0,
                remain = len !== 1 || (sub && $.isFunction(sub.promise)) ? len : 0,
                deferred = remain === 1 ? sub : Deferred(),
                progressValues, progressContexts, resolveContexts,
                updateFn = function (i, ctx, val) {
                    return function (value) {
                        ctx[i] = this
                        val[i] = arguments.length > 1 ? slice.call(arguments) : value
                        if (val === progressValues) {
                            deferred.notifyWith(ctx, val)
                        } else if (!(--remain)) {
                            deferred.resolveWith(ctx, val)
                        }
                    }
                }

            if (len > 1) {
                progressValues = new Array(len)
                progressContexts = new Array(len)
                resolveContexts = new Array(len)
                for (; i < len; ++i) {
                    if (resolveValues[i] && $.isFunction(resolveValues[i].promise)) {
                        resolveValues[i].promise()
                            .done(updateFn(i, resolveContexts, resolveValues))
                            .fail(deferred.reject)
                            .progress(updateFn(i, progressContexts, progressValues))
                    } else {
                        --remain
                    }
                }
            }
            if (!remain) deferred.resolveWith(resolveContexts, resolveValues)
            return deferred.promise()
        }

        $.Deferred = Deferred
    })(Zepto)

    return Zepto
}))

// zepto extend
//动画效果模块
;
(function ($, undefined) {
    var document = window.document, docElem = document.documentElement,
        origShow = $.fn.show, origHide = $.fn.hide, origToggle = $.fn.toggle

    function anim(el, speed, opacity, scale, callback) {
        if (typeof speed == 'function' && !callback) callback = speed, speed = undefined
        var props = {opacity: opacity}
        if (scale) {
            props.scale = scale
            el.css($.fx.cssPrefix + 'transform-origin', '0 0')
        }
        return el.animate(props, speed, null, callback);
    }

    function hide(el, speed, scale, callback) {
        return anim(el, speed, 0, scale, function () {
            origHide.call($(this))
            callback && callback.call(this)
        })
    }


    $.fn.fadeTo = function (speed, opacity, callback) {
        return anim(this, speed, opacity, null, callback)
    }

    $.fn.fadeIn = function (speed, callback) {
        var target = this.css('opacity')
        if (target > 0) this.css('opacity', 0)
        else target = 1
        return origShow.call(this).fadeTo(speed, target, callback)
    }

    $.fn.fadeOut = function (speed, callback) {
        return hide(this, speed, null, callback)
    }

    $.fn.fadeToggle = function (speed, callback) {
        return this.each(function () {
            var el = $(this)
            el[
                (el.css('opacity') == 0 || el.css('display') == 'none') ? 'fadeIn' : 'fadeOut'
                ](speed, callback)
        })
    }
})(Zepto)


/**
 * Created by JetBrains Phpstrom.
 * Auther: Xinxinxin
 * Data: 2017/11/7
 * Time: 14:54
 */

var JQUERY = window.jQuery || window.Zepto;
if (!JQUERY) {
    throw new Error('jQuery or Zepto is needed!');
} else {
    window.console && console.log(JQUERY.fn['jquery'] ? 'jQuery-' + jQuery.fn['jquery'] : 'Zepto');
}

// 时间格式化
// var time1 = new Date().Format("yyyy-MM-dd");
// var time2 = new Date().Format("yyyy-MM-dd HH:mm:ss");
Date.prototype.Format = function (format) {
    var args = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),  //quarter
        "S": this.getMilliseconds()
    };
    if (/(y+)/.test(format))
        format = format.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var i in args) {
        var n = args[i];
        if (new RegExp("(" + i + ")").test(format))
            format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? n : ("00" + n).substr(("" + n).length));
    }
    return format;
};


;(function ($) {
    // "use strict";
    var xin = function (selector, context) {
        return new xin.pt.init(selector, context);
    }

    var version = "1.0";
    var index = 0;
    var _console = {
        log: $.noop, error: $.noop, info: $.noop, warn: $.noop, debug: $.noop, group: $.noop, groupEnd: $.noop
    };

    var config = {
        base: "./",
        charset: "utf-8",
        debug: false,
        iPortal: false,
        console: false
    };

    // 继承属性
    xin.pt = xin.prototype = {
        xin: version,
        constructor: xin
    }

    // 实例化jQuery对象
    var XinClass = xin.pt.init = function (selector, context) {
        this.index = ++index;
        this.$ = $(selector, context); // 将 jQuery 对象传给属性 $
        return this;
    }

    // 实例化ClassXin, 并赋予 xin 继承属性
    XinClass.prototype = xin.pt;

    // 正则
    var reg = xin.R = {
        trim: /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        http: /^http(s)?:\/\//i,
        _http: /^(http(s)?:\/\/|file:\/\/)/i
    }
    // 扩展内置方法
    $.extend(true, xin, {

        data: {},
        config: function (args, single) {
            if ($.type(args) === "string" || $.type(args) === "number") {
                if ($.type(single) === "undefined")
                    return config[args];
                config[args] = single;
            }
            if ($.isPlainObject(args)) {
                if (args.modules !== config.modules)
                    arm.use(args.modules);
                $.extend(true, config, args);
            }
            return config;
        },
        console: function (always) {
            var __console = window.console && (config.debug || always || config.console) ? window.console : _console;
            var name = typeof always === "string" ? always : '调试';
            __console.warn('[' + name + '] ' + new Date().format('yyyy-MM-dd HH:mm:ss'));
            return __console;
        },
        // 获取arm目录路径
        path: (function () {
            var js = document.scripts, script = js[js.length - 1], jsPath = script.src;
            if (script.getAttribute('merge')) return;
            return jsPath.substring(0, jsPath.lastIndexOf("/") + 1);
        })(),
        // 获取arm引用地址
        srcUrl: (function () {
            var js = document.scripts, script = js[js.length - 1], jsPath = script.src;
            if (script.getAttribute('merge')) return;
            return jsPath;
        })(),

        // 获取引用页目录路径
        refer: window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1),
        // 判断环境
        isMobile: ($.os && ($.os.tablet || $.os.phone)) || /Android|Windows Phone|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent),
        rAF: window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
        function (callback) {
            window.setTimeout(callback, 1000 / 60);
        },
        // 检测支持
        support: {
            // 触摸
            touch: (window.Modernizr && Modernizr.touch === true) || (function () {
                return !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);
            })(),
            transition: (function () {
                // 创建一个元素用于测试
                var el = document.createElement('arm');

                // 将所有主流浏览器实现方式整合成一个对象，用于遍历
                // key   是属性名称
                // value 是事件名称
                var transEndEventNames = {
                    transition: 'transitionend',
                    WebkitTransition: 'webkitTransitionEnd',
                    MozTransition: 'transitionend',
                    OTransition: 'oTransitionEnd otransitionend'
                };

                // 循环遍历上面那个对象，判断 CSS 属性是否存在
                for (var name in transEndEventNames) {
                    if (el.style[name] !== undefined) {
                        return {end: transEndEventNames[name]};
                    }
                }

                return false;
            })()
        },

        is_lessIE: function (v) {
            if (/Microsoft Internet Explorer/i.test(navigator.appName)) {
                var ver = navigator.appVersion.match(/msie(\s+)?(\d)/i);
                if (ver && Number(ver[2]) < v) {
                    return true;
                }
            }
            return false;
        },

        // 阻止默认事件
        prevent: function (e) {
            if (e) {
                if (e.preventDefault) e.preventDefault();
                else e.returnValue = false;
            } else {
                return false;
            }
        },

        JSONstring: function (obj) {
            if (window.JSON) return JSON.stringify(obj);
            return 'JSON is not support!';
        },

        objectJoin: function (obj, sep) {
            var sept = sep || "";
            if (typeof obj === "string")
                return obj;
            if ($.isArray(obj)) {
                return obj.join(sept);
            }
            if ($.isPlainObject(obj)) {
                var arr = [];
                $.each(obj, function (index, val) {
                    arr.push(val);
                });
                return arr.join(sept);
            }
            return String(obj);
        },
        /**
         ** 在对象长度范围内
         **/
        inLen: function (len, index) {
            if (index > len - 1)
                index = len - 1;
            if (index < 0)
                index = 0;
            return index;
        },
        /**
         * 对象过滤
         **/
        inObject: function (obj, filter) {
            var index = -1;
            $.each(obj, function (i, v) {
                if (filter(v, i)) {
                    index = i;
                    return false;
                }
            });
            return index;
        },
        /**
         ** 根据某一属性，查找对象数组中是否包含该成员
         **/
        inArrayObj: function (key, val, array) {
            var index = -1;
            var _array = $.isArray(array) ? array.slice(0) : [];
            if (!_array.length)
                return index;
            for (var i = 0; i < _array.length; i++) {
                if (_array[i][key] === val) {
                    return i;
                }
            }
            ;
            return index;
        },

        /**
         *** 根据某键值，判断是某符合对象
         **/
        inObjKey: function (key, obj, name) {
            var out = false;
            if (!key || typeof obj !== "object")
                return out;
            var k;
            for (k in obj) {
                if (obj[k] === key) {
                    if (typeof name === "undefined" || name === k) {
                        out = true;
                        break;
                    }
                }
            }
            return out;
        },

        /*
         根据name读取obj中的成员数据
         */
        getNameValue: function (obj, name, sep) {
            var sep = sep || /[\.|\||_]/;
            var names = name.split(sep);
            var temp = obj;
            for (var i = 0; i < names.length; i++) {
                var key = names[i];
                temp = temp[key];
                if (!temp) {
                    break;
                }
            }
            return temp;
        },
        /*
         根据name修改obj中的成员数据
         */
        setNameValue: function (obj, name, value, sep) {
            var sep = sep || /[\.|\||_]/;
            var names = name.split(sep);
            var temp = obj;
            for (var i = 0; i < names.length; i++) {
                var key = names[i];
                if (!temp.hasOwnProperty(key)) {
                    temp[key] = {};
                }
                if (i !== names.length - 1 && typeof temp[key] !== "object") {
                    break;
                }
                if (i == names.length - 1) {
                    temp[key] = value;
                } else {
                    temp = temp[key];
                }
            }
        },
        /**
         ** 数组元素移动位置，重新排序
         **/
        sortAarry: function (arr, from, to) {
            var len = arr.length;
            if (!arr.length)return -1;
            var _index = to;
            if (to === "uper") {
                _index = from + 1;
            }
            if (to === "downer") {
                _index = from - 1;
            }
            if (to === "top")
                _index = len - 1;
            if (to === "bottom")
                _index = 0;

            _index = arm.inLen(len, _index);
            if (_index === from)
                return _index;
            var item = arr.splice(arm.inLen(len, from), 1);
            arr.splice(_index, 0, item[0]);
            return _index;
        },
        /**
         ** getImgNaturalSize 获取图片真实尺寸
         **/
        getImgNaturalSize: function (img, callback) {
            var nWidth, nHeight;
            if (img.naturalWidth) { // 现代浏览器
                nWidth = img.naturalWidth;
                nHeight = img.naturalHeight;
                callback(nWidth, nHeight);
            } else { // IE6/7/8
                var image = new Image();
                image.src = img.src;
                image.onload = function () {
                    callback(image.width, image.height);
                }
            }
            return [nWidth, nHeight];
        },
        // 获取url参数 ? or #
        getUrlParam: function (name, url, hash) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var hash = hash || (typeof url === 'boolean' ? url : false);
            var url = /^http(s)?:\/\//i.test(url) ? url : window.location.href;
            if (!hash) {
                url = url.replace(/#(.*)?/i, '');
            }
            var r = url.substr(url.indexOf(hash ? '#' : '?') + 1).match(reg);
            if (r != null)
                return decodeURIComponent(r[2]);
            return null;
        },
        updateUrlParam: function (url, name, value, callback) {
            var r = url,
                change = false,
                v = "";
            if (r != null && r != 'undefined' && r != "") {
                value = encodeURIComponent(value);
                var reg = new RegExp("(^|)" + name + "=([^&]*)(|$)");
                var tmp = name + "=" + value;
                if (url.match(reg) != null) {
                    r = url.replace(eval(reg), tmp);
                    v = url.match(reg)[2];
                    change = value !== v;
                }
                else {
                    if (url.match("[\?]")) {
                        r = url + "&" + tmp;
                    } else {
                        r = url + "?" + tmp;
                    }
                    change = true;
                }
            }
            if (typeof callback === "function")
                callback({
                    url: r,
                    _url: url,
                    name: name,
                    value: value,
                    _value: v,
                    change: change
                });
            return r;
        },
        toHump: function (str, isbig) {
            var _strs = $.trim(str).split(/\s+/);
            var out = "";
            $.each(_strs, function (index, word) {
                out += arm.utils.firstUpper(word);
            });
            if (!isbig)
                out = arm.utils.firstLower(out);
            return out;
        },
        utils: (function () {
            var me = {};
            var _elementStyle = document.createElement('div').style;

            function _prefixStyle(style) {
                if (style in _elementStyle)
                    return style;
                var vendors = ['webkit', 'Moz', 'ms', 'O'],
                    s,
                    i = 0,
                    l = vendors.length;

                for (; i < l; i++) {
                    s = vendors[i] + style.charAt(0).toUpperCase() + style.substr(1);
                    if (s in _elementStyle) return s;
                }
                return false;
            }

            me.getTime = Date.now || function getTime() {
                    return new Date().getTime();
                };
            me.generateGUID = function (namespace) {
                var uid = namespace + '-' || 'arm-';
                do {
                    uid += Math.random().toString(36).substring(2, 7);
                } while (document.getElementById(uid));

                return uid;
            };

            // 首字母大写
            me.firstUpper = function (str) {
                return str.replace(/^\w|\s\w/g, function (v) {
                    return v.toUpperCase()
                });
            };

            // 首字母小写
            me.firstLower = function (str) {
                return str.replace(/^\w|\s\w/g, function (v) {
                    return v.toLowerCase()
                });
            };


            me.realPath = function (path, base) {
                var path = path || "";
                path = path.replace(/^\.\//, '');
                while (path.match(/^\.\.\//)) {
                    path = path.replace(/\.\.\//, "");
                    base = base.replace(/[^\/]+\/$/, "");
                }
                return base + path;

            };

            me.realBase = function () {
                var base = arm.config('base');
                base = typeof base === "string" ? base : arm.path;
                return arm.R._http.test(base) ? base : me.realPath(base, arm.path);
            };

            me.moduleUrl = function (module) {
                if (arm.R._http.test(module)) {
                    return module;
                }
                if (/^\//.test(module)) {
                    return location.protocol + "//" + location.host + module;
                }
                var base = me.realBase();
                var url = me.realPath(module, base);
                return url;
            };

            me.moduleType = function (module) {
                var moduleName = module.substring(module.lastIndexOf('/') + 1);
                var moduleType = moduleName.substr(moduleName.lastIndexOf('.'));

                var isCSS = /^\.css(\W)?/.test(moduleType);
                var noCSSJS = !/[\?|&]/.test(module) && !/^\.(js|css)(\W)?/.test(moduleType);
                return {
                    name: moduleName.replace(/[^a-zA-Z0-9\-]/g, '-'),
                    isCSS: isCSS,
                    isJS: isCSS ? false : true,
                    noCSSJS: noCSSJS
                }
            };

            me.getJSUrl = function () {
                var js = document.scripts;
                for (var i = js.length - 1; i >= 0; i--) {
                    if (js[i].src && !js[i].getAttribute('merge'))
                        return js[i].src;
                }
                ;
                return location.href;
            };

            // getClassFn by reg
            me.getClassFn = function (regStr) {
                var reg = new RegExp(regStr, "ig");
                return function (index, oldClassName) {
                    var c = oldClassName.match(reg);
                    return c ? c.join(" ") : "";
                }
            }

            // error
            me.error = function (log, e, type) {
                type = (type ? (type + " ") : "") + "Error：";
                window.console && console.error(type + (log || '') + '\n' + (e || ''));
                return log;
            };

            me.extend = function (target, obj) {
                for (var i in obj) {
                    target[i] = obj[i];
                }
            };

            me.addEvent = function (el, type, fn, capture) {
                el.addEventListener(type, fn, !!capture);
            };

            me.removeEvent = function (el, type, fn, capture) {
                el.removeEventListener(type, fn, !!capture);
            };

            me.prefixPointerEvent = function (pointerEvent) {
                return window.MSPointerEvent ?
                    'MSPointer' + pointerEvent.charAt(9).toUpperCase() + pointerEvent.substr(10) :
                    pointerEvent;
            };

            me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {
                var distance = current - start,
                    speed = Math.abs(distance) / time,
                    destination,
                    duration;

                deceleration = deceleration === undefined ? 0.0006 : deceleration;

                destination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );
                duration = speed / deceleration;

                if (destination < lowerMargin) {
                    destination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;
                    distance = Math.abs(destination - current);
                    duration = distance / speed;
                } else if (destination > 0) {
                    destination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;
                    distance = Math.abs(current) + destination;
                    duration = distance / speed;
                }

                return {
                    destination: Math.round(destination),
                    duration: duration
                };
            };

            var _transform = _prefixStyle('transform');
            me.prefixStyle = _prefixStyle;
            me.extend(me, {
                hasTransform: _transform !== false,
                hasPerspective: _prefixStyle('perspective') in _elementStyle,
                hasTouch: 'ontouchstart' in window,
                hasPointer: window.PointerEvent || window.MSPointerEvent, // IE10 is prefixed
                hasTransition: _prefixStyle('transition') in _elementStyle
            });
            // This should find all Android browsers lower than build 535.19 (both stock browser and webview)
            me.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\/\d/.test(window.navigator.appVersion));

            me.extend(me.style = {}, {
                transform: _transform,
                transitionTimingFunction: _prefixStyle('transitionTimingFunction'),
                transitionDuration: _prefixStyle('transitionDuration'),
                transitionDelay: _prefixStyle('transitionDelay'),
                transformOrigin: _prefixStyle('transformOrigin')
            });

            me.hasClass = function (e, c) {
                var re = new RegExp("(^|\\s)" + c + "(\\s|$)");
                return re.test(e.className);
            };

            me.addClass = function (e, c) {
                if (me.hasClass(e, c)) {
                    return;
                }

                var newclass = e.className.split(' ');
                newclass.push(c);
                e.className = newclass.join(' ');
            };

            me.removeClass = function (e, c) {
                if (!me.hasClass(e, c)) {
                    return;
                }

                var re = new RegExp("(^|\\s)" + c + "(\\s|$)", 'g');
                e.className = e.className.replace(re, ' ');
            };

            me.offset = function (el) {
                var left = -el.offsetLeft,
                    top = -el.offsetTop;

                // jshint -W084
                while (el = el.offsetParent) {
                    left -= el.offsetLeft;
                    top -= el.offsetTop;
                }
                // jshint +W084

                return {
                    left: left,
                    top: top
                };
            };

            me.preventDefaultException = function (el, exceptions) {
                for (var i in exceptions) {
                    if (exceptions[i].test(el[i])) {
                        return true;
                    }
                }

                return false;
            };

            me.extend(me.eventType = {}, {
                touchstart: 1,
                touchmove: 1,
                touchend: 1,

                mousedown: 2,
                mousemove: 2,
                mouseup: 2,

                pointerdown: 3,
                pointermove: 3,
                pointerup: 3,

                MSPointerDown: 3,
                MSPointerMove: 3,
                MSPointerUp: 3
            });

            me.extend(me.ease = {}, {
                quadratic: {
                    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
                    fn: function (k) {
                        return k * ( 2 - k );
                    }
                },
                circular: {
                    style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',   // Not properly "circular" but this looks better, it should be (0.075, 0.82, 0.165, 1)
                    fn: function (k) {
                        return Math.sqrt(1 - ( --k * k ));
                    }
                },
                back: {
                    style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                    fn: function (k) {
                        var b = 4;
                        return ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;
                    }
                },
                bounce: {
                    style: '',
                    fn: function (k) {
                        if (( k /= 1 ) < ( 1 / 2.75 )) {
                            return 7.5625 * k * k;
                        } else if (k < ( 2 / 2.75 )) {
                            return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;
                        } else if (k < ( 2.5 / 2.75 )) {
                            return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;
                        } else {
                            return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;
                        }
                    }
                },
                elastic: {
                    style: '',
                    fn: function (k) {
                        var f = 0.22,
                            e = 0.4;

                        if (k === 0) {
                            return 0;
                        }
                        if (k == 1) {
                            return 1;
                        }

                        return ( e * Math.pow(2, -10 * k) * Math.sin(( k - f / 4 ) * ( 2 * Math.PI ) / f) + 1 );
                    }
                }
            });

            me.tap = function (e, eventName) {
                var ev = document.createEvent('Event');
                ev.initEvent(eventName, true, true);
                ev.pageX = e.pageX;
                ev.pageY = e.pageY;
                e.target.dispatchEvent(ev);
            };

            me.dispatchEvent = function (type, e, target) {
                var ev = document.createEvent('MouseEvents');
                ev.initMouseEvent(type, true, true, e.view, 1,
                    target.screenX, target.screenY, target.clientX, target.clientY,
                    e.ctrlKey, e.altKey, e.shiftKey, e.metaKey,
                    0, null);

                ev._constructed = true;
                target.dispatchEvent(ev);
            };

            me.click = function (e) {
                var target = e.target,
                    ev;

                if (!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)) {
                    me.dispatchEvent("click", e, target);
                }
            };

            return me;
        })()
    });

    // 扩展对象操作
    $.extend(true, xin, {
        //深克隆json对象和数组
        clone: function (jsonObj) {
            var buf;
            if (jsonObj instanceof Array) {
                buf = [];
                var i = jsonObj.length;
                while (i--) {
                    buf[i] = X.clone(jsonObj[i]);
                }
                return buf;
            } else if (jsonObj instanceof Object) {
                buf = {};
                for (var k in jsonObj) {
                    buf[k] = X.clone(jsonObj[k]);
                }
                return buf;
            } else {
                return jsonObj;
            }
        },
        // var array2 = [{kcxz: "专业课", xf: 8},{kcxz: "大类基础课", xf: 2},{kcxz: "通识课", xf: 2}]
        // var array1 = [{kcxz: "通识课", xf: 18},{kcxz: "大类基础课", xf: 20},{kcxz: "专业课", xf: 18},{kcxz: "拓展课", xf: 18}]
        // console.log(X.compare(array1,array2,'kcxz'))
        //array1是父级数组，array2是array1的子集，array2的所有元素array1都有
        //要取array2在array1中的补集
        //key是以哪个键为标准
        compare: function (array1, array2, key) {
            var result = [];
            for (var i = 0; i < array1.length; i++) {
                var obj = array1[i];
                var kcxz = obj[key];
                var isExist = false;
                for (var j = 0; j < array2.length; j++) {
                    var aj = array2[j];
                    var n = aj[key];
                    if (n == kcxz) {
                        isExist = true;
                        break;
                    }
                }
                if (!isExist) {
                    result.push(obj);
                }
            }
            return result;
        }
    });

    // 扩展ajax方法
    $.extend(true, xin, {
        //基于jquery的ajax二次封装
        // handleAjax('getCradits.json', {page: 10}).done(function (resp) {
        //  当result为true的回调
        //  console.log(resp)
        //  }).fail(function (err) {
        //  当result为false的回调
        //  console.log(err)
        //  });

        handleAjax: function (url, param, type, dataType) {

            function ajax(url, param, type, dataType) {
                return $.ajax({
                    url: url,
                    data: param || {},
                    type: type || 'GET',
                    dataType: dataType || 'json'
                });
            }

            return ajax(url, param, type, dataType).then(function (resp) {
                // 成功回调
                if (resp.resultCode == 0) {
                    // 直接返回要处理的数据，作为默认参数传入之后done()方法的回调
                    return resp.result.data;
                }
                else {
                    // 返回一个失败状态的deferred对象，把错误代码作为默认参数传入之后fail()方法的回调
                    return $.Deferred().reject(resp.errorMsg);
                }
            }, function (err) {
                // 失败回调
                // 打印状态码
                console.log(err.status);
            });
        },

    });

    // 扩展存储模块
    $.extend(true, xin, {
        //设置cookie
        setCookie: function (name, value, days, path) {
            var name = escape(name);
            var value = escape(value);
            var expires = new Date();
            expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
            path = path == "" ? "" : ";path=" + path;
            _expires = (typeof hours) == "string" ? "" : ";expires=" + expires.toUTCString();
            document.cookie = name + "=" + value + _expires + path;
        },
        //获取cookie值
        getCookie: function (name) {
            var name = escape(name);
            //读cookie属性，这将返回文档的所有cookie
            var allcookies = document.cookie;

            //查找名为name的cookie的开始位置
            name += "=";
            var pos = allcookies.indexOf(name);
            //如果找到了具有该名字的cookie，那么提取并使用它的值
            if (pos != -1) {                                    //如果pos值为-1则说明搜索"version="失败
                var start = pos + name.length;                  //cookie值开始的位置
                var end = allcookies.indexOf(";", start);       //从cookie值开始的位置起搜索第一个";"的位置,即cookie值结尾的位置
                if (end == -1) end = allcookies.length;         //如果end值为-1说明cookie列表里只有一个cookie
                var value = allcookies.substring(start, end);   //提取cookie的值
                return unescape(value);                         //对它解码
            }
            else return "";                                     //搜索失败，返回空字符串
        },
        //删除cookie
        deleteCookie: function (name, path) {
            var name = escape(name);
            var expires = new Date(0);
            path = path == "" ? "" : ";path=" + path;
            document.cookie = name + "=" + ";expires=" + expires.toUTCString() + path;
        },
        //本地存储localStorage
        //X.store.set('aq','ac')
        //X.store.remove('aq')
        store: (function () {
            var api = {},
                win = window,
                doc = win.document,
                localStorageName = 'localStorage',
                globalStorageName = 'globalStorage',
                storage;

            api.set = function (key, value) {
            };
            api.get = function (key) {
            };
            api.remove = function (key) {
            };
            api.clear = function () {
            };

            if (localStorageName in win && win[localStorageName]) {
                storage = win[localStorageName];
                api.set = function (key, val) {
                    storage.setItem(key, val)
                };
                api.get = function (key) {
                    return storage.getItem(key)
                };
                api.remove = function (key) {
                    storage.removeItem(key)
                };
                api.clear = function () {
                    storage.clear()
                };

            } else if (globalStorageName in win && win[globalStorageName]) {
                storage = win[globalStorageName][win.location.hostname];
                api.set = function (key, val) {
                    storage[key] = val
                };
                api.get = function (key) {
                    return storage[key] && storage[key].value
                };
                api.remove = function (key) {
                    delete storage[key]
                };
                api.clear = function () {
                    for (var key in storage) {
                        delete storage[key]
                    }
                };

            } else if (doc.documentElement.addBehavior) {

                function getStorage() {
                    if (storage) {
                        return storage
                    }
                    storage = doc.body.appendChild(doc.createElement('div'));
                    storage.style.display = 'none';
                    storage.addBehavior('#default#userData');
                    storage.load(localStorageName);
                    return storage;
                }

                api.set = function (key, val) {
                    var storage = getStorage();
                    storage.setAttribute(key, val);
                    storage.save(localStorageName);
                };
                api.get = function (key) {
                    var storage = getStorage();
                    return storage.getAttribute(key);
                };
                api.remove = function (key) {
                    var storage = getStorage();
                    storage.removeAttribute(key);
                    storage.save(localStorageName);
                };
                api.clear = function () {
                    var storage = getStorage();
                    var attributes = storage.XMLDocument.documentElement.attributes;
                    storage.load(localStorageName);
                    for (var i = 0, attr; attr = attributes[i]; i++) {
                        storage.removeAttribute(attr.name);
                    }
                    storage.save(localStorageName);
                }
            }
            return api;

        })()
    });

    // 扩展时间模块
    $.extend(true, xin, {
        //获取当前时间戳
        nowTimestamp: function () {
            return Date.parse(new Date())
        },
        //获取指定时间戳的日期格式
        timestamp: function (timestamp) {
            return new Date(timestamp).Format("yyyy-MM-dd hh:mm:ss")
        }
    });

    // 扩展字符串操作
    $.extend(true, xin, {

        //去除左边空格
        ltrim: function (str) {
            return str.replace(/(^\s*)/g, '');
        },
        //去除右边空格
        rtrim: function (str) {
            return str.replace(/(\s*$)/g, '');
        },
        //去除空格
        trim: function (str) {
            return str.replace(/(^\s*)|(\s*$)/g, '');
        },
        //简单的数据绑定formateString
        // user={"name":"wangyun"}
        // console.log(X.formateString("欢迎@(name)来到百度世界",user))
        formateString: function (str, data) {
            return str.replace(/@\((\w+)\)/g, function (match, key) {
                return typeof data[key] === "undefined" ? '' : data[key];
            });
        },
        //正则匹配关键字
        // X.keyword("12312313",'1',"red")
        keyword: function (content, keyword, color) {
            return content.replace(new RegExp(keyword, 'ig'), '<font color="' + color + '">' + keyword + '</font>');
        },

    });

    // 扩展数字操作
    $.extend(true, xin, {
        //随机数
        random: function (begin, end) {
            return Math.floor(Math.random() * (end - begin + 1)) + begin;
        },
        // 生成一个随机唯一id的方法
        createRandomId: function () {
            var rnd = Math.random().toString().replace('.', '');
            var date = new Date().getTime();
            return rnd + date;
        }
    });

    /*判断数据类型*/
    $.extend(true, xin, {
        //数据类型检测
        isNumber: function (val) {
            return typeof val === 'number' && isFinite(val);
        },
        isBoolean: function (val) {
            return typeof val === "boolean";
        },
        isString: function (val) {
            return typeof val === "string";
        },
        isUndefined: function (val) {
            return typeof val === "undefined";
        },
        isObj: function (str) {
            if (str === null || typeof str === 'undefined') {
                return false;
            }
            return typeof str === 'object';
        },
        isNull: function (val) {
            return val === null;
        },
        isArray: function (arr) {
            if (arr === null || typeof arr === 'undefined') {
                return false;
            }
            return arr.constructor === Array;
        }
    });

    /*URL查询模块*/
    $.extend(true, xin, {
        /*获取页面传递过来的参数，获取？问好后面的*/
        /*X.simpleQuery()*/
        simpleQuery: function () {
            var params = window.location.search; //params:?id,date
            var arr = params.substring(1).split(",");
            return arr;
        },
        //获取URL查询字符串参数值的通用函数，获取查询字符串组成对象
        //var query = X.querystring();//调用查询字符串函数
        //for(var i in query){
        //   console.log(i+"="+query[i]);
        //}
        querystring: function () {
            var str = window.location.search.substring(1); //获取查询字符串，即"id=1&name=location"的部分
            var arr = str.split("&"); //以&符号为界把查询字符串分割成数组
            var json = {}; //定义一个临时对象
            for (var i = 0; i < arr.length; i++) //遍历数组
            {
                var c = arr[i].indexOf("="); //获取每个参数中的等号小标的位置
                if (c == -1) continue; //如果没有发现测跳到下一次循环继续操作
                var d = arr[i].substring(0, c); //截取等号前的参数名称，这里分别是id和name
                var e = arr[i].substring(c + 1); //截取等号后的参数值
                json[d] = e; //以名/值对的形式存储在对象中
            }
            return json; //返回对象
        },
        //获取url指定的查询字符串
        // GetQueryString("aa");
        getQueryString: function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        },
        //获取url地址，不含参数，？前面的
        getDocumentUrl: function (name) {
            return location.protocol + '//' + location.host + location.pathname;
        },
    });


    /**
     ** 外部接口
     **/

        // 防冲突
    var _xin = window.xin,
        _X = window.X;

    // 全局接口
    window.Xin = window.X = xin;

    /*// 冲突控制
     xin.noConflict = function (deep) {
     // 移交 A
     window.X = _X;
     if (deep && _xin === xin) {
     // 移交 xin 给第一个版本
     window.Xin = _xin;
     }
     xin._isConflict = true;

     return xin;
     };

     var varXin = xin.getUrlParam('var', xin.srcUrl);

     if (varXin && /^[a-zA-Z|_]+/.test(varXin) && !window[varXin]) {
     xin.pt._var = varXin;
     window[varArm] = xin;
     }

     // 模块接口
     if ("function" === typeof define) {
     define('xin', function () {
     return xin;
     })
     }

     return xin;*/


})(JQUERY);


// $ extend
;(function (win, $, X) {


    /*浏览器种类模块*/
//判断是否IE内核
// if(browser.versions.trident){ alert(“is IE”); }
//判断是否webKit内核
// if(browser.versions.webKit){ alert(“is webKit”); }
//判断是否移动端
// if(browser.versions.mobile||browser.versions.android||browser.versions.ios){ alert(“移动端”); }
    $.browser = {
        versions: function () {
            var u = navigator.userAgent,
                app = navigator.appVersion;
            return {
                trident: u.indexOf('Trident') > -1, //IE内核
                presto: u.indexOf('Presto') > -1, //opera内核
                webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,//火狐内核
                mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
                ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1, //android终端
                iPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器
                iPad: u.indexOf('iPad') > -1, //是否iPad
                webApp: u.indexOf('Safari') == -1, //是否web应该程序，没有头部与底部
                weixin: u.indexOf('MicroMessenger') > -1, //是否微信 （2015-01-22新增）
                qq: u.match(/\sQQ/i) == " qq" //是否QQ
            };
            return this;
        }(),
        language: (navigator.browserLanguage || navigator.language).toLowerCase()

    };

})(window, JQUERY, window.xin);

/* $.loading
 * @authors yaozhengxin
 * @date    2017-11-9 19:54:54
 * @version
 */
;(function (win, $, X) {
    $.fn.loading = function (settings) {

        $("body").on("touchmove", function (event) {
            event.preventDefault;
        }, false)

        settings = $.extend(true, {content: '正在加载...', action: "open", mask: true}, settings);
        _init = function () {
            if (settings.action == "open") {
                var str = '<div  class="modal" id="loadingId-div">' +
                    '<div class="loading-contenti-ani loading-contenti-sty">' +
                    '<div class="modal-content-ani modal-content-sty">' +
                    '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAABgCAYAAAB8InCYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTEyQjgwM0UzMTBCMTFFNUIyNUU5QzA2MTI2NENCQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTEyQjgwM0YzMTBCMTFFNUIyNUU5QzA2MTI2NENCQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMTJCODAzQzMxMEIxMUU1QjI1RTlDMDYxMjY0Q0JBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMTJCODAzRDMxMEIxMUU1QjI1RTlDMDYxMjY0Q0JBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp61On4AAAmCSURBVHja7JoJcFbVFcezftlMjI1EEnWE2k4LVSoCajALIZgURaRiqFpbQQc7da2CiOMCUVAZkeqI2jpTl9ZaMOJCU1ECIZuyu6CAiopiBTUKmhASliT+DjnfzOPlvu9773tfhhmHN3PmvuW+e/733HPP9l5sV1dXzOE84mIO85HgpXN9ff2pSGwcp/m0ubQ5sbGxHZzv4Pz/UG1cXNzLhYWFW9yOGetmCerq6n5LM4u+A2G4k3Y519ugHZzHcy+H8/5QCXQUtLazs3P6yJEja3wBYMb9ef4MNJzLldCdMssRI0YcMPWvra1Npm8ZgO7lcgBUBU2i/zeeATDrAp4t4jQduoPreTNmzOh0I9YlS5YkJScn381yTGGMbbRjWZZ3XQOoqakpjI+Pr+b0bZ5fzgzej0TBAJ1H8xRj5EB5xcXFG8MCELGzfms4/aipqSm/vLy8w4+WsyyiExtYlq729vZhZWVlO0NuQ5j/hyYNYBP9MpcD6e1mrElQf5blsZB2AJGV05xJ59sR1wfR2uuMVceY86EJLO8ZoSQwC2pkGR6MtsFpbW2dLsuKbt1t1IEVK1YMYZ3WCWDEVtsbVg99uBweT7Ar+hYUFDQdIgEejBMjg+I19JrZTUhYzIQ7Ozo6xpqWQPZ9jV3xkEwRyKcIRreMKisrA7wzk6UcbL2fn5+/i2aV8DIByEUC2+yDASqJZg5AHnEDQphnZ2dXcjr9wIEDPforj1wTADEW2+0vYM+X0sjaXRUORJC5mGMux/Hum4YJCY8cE4AumMQ57OV/hwNhZ847rxpNbzePLhOA7RihnBAGxRGEW+Zq6ITH9h4AGPgLqF8Yq9YDhBfmyqef8OoBgAHqZcnXr1+f6BYEmv6oF+b0P5bmDOXVA8BLNEc3NzcXurDvB0FAk90yVx4H9z92oMroDfEFG7luwRid7cYR0f8c6Q/zVS69osQEm+l/rjEmZLDbaF7s06fPVNn74QYtKiqq9mAI74dOQgnHh4wHQNpIMxQxnV5SUrIpSj5gFE01evMsoH8fMh7Ael1K8x1e6+lwCunmWLZs2dEw/gf0IZO9JmxeMGrUqG10lij4lJaWljXLly8fFClz8SM4oLdgnIHox7L233kJSofRvMTzPrR3Qfc5RcP2o6qqKjUtLe0+JnItlzLzC5wCnJBheUNDQw668ASnv4HWM2BFIBBYlpeX1+YQDWekpqaex5gC+GTo2ba2tqtHjx7d7CsxIYwqJYi4h1MJWvbwzusOiYnkD4lc1yPyacx6dVQyI0vE/PNwqRlKvFj0KKqp2Y86Oz4CIMGjST0NpStHb47nMhMKcP0r9SObJYPmugZz2xBVJcSincs2TGPwVWyvHVaDtHLlypS9e/eWMc6FPB/DrWMgsX5z2TULwmXUIQFUV1fnJiYmDsIYrcUxfesmIsaTzuZ0SnfwE1sPXUZq/rlnAPiArMzMzOYhQ4bsj8D7jYHxIsYOiGOjvRij9JprJZRaECY3EAlzjZiqYPpHjX4zAfMi1nS4KwDiPlnnrH379nX60W5ALATEU3qZgg5VIZmfhQMQi/u8WXAQD3zJC2ul3OIDxwOWc1HOx8PVBy6mkbAsXm8NTUlJmemjLiAlGevaF0uG7AgAkd1kGCfdz1KwnPNst24xAgDZWTJjwxhb/ADQ3NIaPwzQYKeHBEqMWhoXtzgKFneP7foiU2o23JBGvYER2RoFAG22pR5kyowGGl58Jko+p902sYGmJUi2vbSf6Oa5KAHYa7s+1rQEARvKLW7svwuzLMx+YVuCfSYJ2AvKyVGa/UUGt99u0oFNNpRp0eCOJC8x3NtgWoINtn6pURD/CUykwPCo0SSBSjuAiooKvyHbGFM9CV7VPQDgvd6T7MfSL557F/gU/wDD7XXWekKc7YU5NqQ3+gHA+80GUPMcnRHBZCUdllqrp6zj0EgBpKenS474ul5KxWUWPBaEDEiI/66WmnEYD+nqkIgKcecTtGYxZjGGba61RmgEgPf6GKbncdoa3EZ4r0k+i9SJjLmLnPF7VzGhKInk9EFJcP44IC6JhLlUWZj5flVyb2G57GN1SEUqjUeJVac61QcO2eiNjccQVw6G+XulpaVfR5yYiC1AcSZw+hfoTGg39D8Ju1nbVxi81ZIXxGdlZfUlhhhGJLRHg5HopeeyI2AstcECScloxchsVNv+jZTiYfyC6fPckfpArwBgSfpCvz6cEpAdslrrwL1TH2Dw0RJUOnzKkxpikrru3bb3JJ64TEDybqsfCTwp244BTzQpcdBiG57JB42/QRf6XYIndYb3uwUAWAnxJTsWA/RfvwCk4CB1wN8xcKHD+50W5nJvvoKbZqoPewIgX79pbtXLh5RBKAn8CRqsbvifnnYBg2c69JOB5J+C06DJlvuiXPuDUa6G4LPV918D+C6DUqdCAVNyej7NLlpRuF/apCAD3aAztbrmK6HzeR50TuO0DvAI994xMJZUv8macVm3odjvjyD5nlNKZ/nZYCYD7Qy6aAX5lQWYRNLWaHqBSmSBhbEs0x8gKXYfr1lStdEXqGhkprdDGZAwr9AZdURgKc+medCS9kvkfQtjbQ3pjHgxW9fyCl2m63hpvkfmUk3/FEpU/bmRMd5wZQnpKPt3snyYVK2ujcDKNqntkE91C00KecQdH1wCxCzb5mFrzm45WtSaRVQl0R0gPuGnhseSos8WHZDi4aUxzj8mLIQiLdNkqN1wSvXXHNQBCSxiusvv9qOV2X/uM2j5CU224ZGE6h8fdiVMCIP+OJqJ0POCNoL1l2TmQ95d5wkAL4vxuD6m+//BDDUmszxOTr4lyn8GXYz3L/GoANkedhvSuUzt+1wNRB5Wc+rpUGYT1SBJcPIBY98KJRkNkQaWgjj4l5P8jnmDNaejTz7Nt9zbHELsksY1BH0H90SCd6hExdd8Ask/io12CYxQ5p9JZYsOJTbmEn7XQY9Z7iWpzbeWZFbEWH5+YIxmSD4BnKLhmdiE20wlmirN/QZwvsgwwYe0v7V4KR+2t+os5Vitxus67p1sW5ItkEzwdHVyPZWQDmscRDteRSsxw98tj05Qscpel5l+Td971ffPibEUpS083vLkC+RPWVVIOW6yxQUm6/nXmO4v6+NVZ3w7IynR9JPcAOZLHcJy6wzbLUHsPFVMXwD+DMmHyqke3pf/UtdCw4LFDT8ARIMnOPzaG+tgA4LB69PQpl6rDyDeWp1hLkx39EpyGuaYJtsqUuZy/CDAAO7JyzP+jrjDAAAAAElFTkSuQmCC" alt="">' +
                    '</div>' +
                    '<p class="loading-text">' + settings.content + '</p>' +
                    '</div>' +
                    '</div>';
                $('body').append(str)
                $('body').css({"overflow": 'hidden'});
                settings.mask == true ? $('#loadingId-div').css('background', 'rgba(0, 0, 0, 0.3)') : $('#loadingId-div').css('background', 'rgba(0, 0, 0, 0.0)');
            }
            else if (settings.action == "close") {
                $('body').css({"overflow": 'visible'});
                if ($("#loadingId-div").length > 0) $("#loadingId-div").remove();
            }
        };
        return (function () {
            _init()
        })();
    };
    $.loading = {
        globalVar: {}, // 内部变量， 外部不得使用(document.body 未初始化时使用；内部变量)
        open: function (obj) {
            $.fn.loading({content: obj.content, action: "open", mask: obj.mask});
        },
        close: function () {
            $.fn.loading({action: "close"});
        }
    };
})(window, JQUERY, window.xin)
/* $.alert
 * @authors yaozhengxin
 * @date    2017-11-9 19:54:54
 * @version
 */
;
(function (win, $, X) {

    //弹窗公共部分js，所有弹窗已经写好，调用时按照页面中注释方法使用即可
    var $oMasking;
    var $oWindowContainer;

    $.fn.alert = function (settings) {
        settings = $.extend(true, {
            title: '提示', mask: true, buttons: '["确定"]', onConfirm: function () {
            }, onCancel: function () {
            }
        }, settings);
        _init = function () {
            if ($('#alertId-div-asdfadf')) {
                var str = '<div class="modal" id="alertId-div-asdfadf">' +
                    '<div class="window-container fix-alertId-div" id="addNew">' +
                    '<h2></h2>' +
                    '<div class="window-content">' +
                    '<p class="window-text"></p>' +
                    '</div>' +
                    '<div class="window-btn fix-alertId-div">' +
                    '<a class="cancel-button fl" href="javascript:;"></a>' +
                    '<a class="confirm-button fr" href="javascript:;"></a>' +
                    '<a class="ack-button fr" href="javascript:;"></a>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
                $('body').append(str)
                $('body').css({"overflow": 'hidden'});

                $oMasking = $('.window-masking');
                $oWindowContainer = $('.window-container');
                settings.mask == true ? $('#alertId-div-asdfadf').css('background', 'rgba(0, 0, 0, 0.3)') : $('#alertId-div-asdfadf').css('background', 'rgba(0, 0, 0, 0.0)');
                modal = new Modal();
                modal.setTitle(settings.title);
                modal.setContents(settings.content);
                //设置按钮个数和链接
                modal.setButton(settings.buttons);

                if ($.browser.versions.mobile || $.browser.versions.android || $.browser.versions.ios) {
                    $('#addNew').find('a.cancel-button').on('click', function () {
                        settings.onCancel()
                        if ($("#alertId-div-asdfadf").length > 0) $("#alertId-div-asdfadf").remove();
                        $('body').css({"overflow": 'visible'});
                    });
                    $('#addNew').find('a.confirm-button').on('click', function () {
                        settings.onConfirm()
                        if ($("#alertId-div-asdfadf").length > 0) $("#alertId-div-asdfadf").remove();
                        $('body').css({"overflow": 'visible'});
                    });
                    $('#addNew').find('a.ack-button').on('click', function () {
                        settings.onConfirm()
                        if ($("#alertId-div-asdfadf").length > 0) $("#alertId-div-asdfadf").remove();
                        $('body').css({"overflow": 'visible'});
                    });
                } else {
                    $('#addNew').find('a.cancel-button').on('click', function () {
                        settings.onCancel()
                        if ($("#alertId-div-asdfadf").length > 0) $("#alertId-div-asdfadf").remove();
                        $('body').css({"overflow": 'visible'});
                    });
                    $('#addNew').find('a.confirm-button').on('click', function () {
                        settings.onConfirm()
                        if ($("#alertId-div-asdfadf").length > 0) $("#alertId-div-asdfadf").remove();
                        $('body').css({"overflow": 'visible'});
                    });
                    $('#addNew').find('a.ack-button').on('click', function () {
                        settings.onConfirm()
                        if ($("#alertId-div-asdfadf").length > 0) $("#alertId-div-asdfadf").remove();
                        $('body').css({"overflow": 'visible'});
                    });
                }

                $oMasking.show();
                //设置弹窗面板展示
                $oWindowContainer.show();
            }
        };
        return (function () {
            _init()
        })();
    };

    //初始化
    var Modal = function () {
        thismodal = $('#addNew');
    };
    //修改内容方法
    Modal.prototype = {
        setContents: function (obj) {
            //找到需要修改内容的标签p，获取调用中设置的提示语
            thismodal.find('p.window-text').html(obj);
        },
        setTitle: function (obj) {
            //找到需要修改的弹窗标题，获取调用中设置的弹窗标题
            if (obj != "") {
                thismodal.find('h2').show().html(obj);
            }
        },
        setButton: function (obj) {
            console.log(obj)
            //解析传过来的参数json
            var json = eval(obj);
            if (json.length == 1) {
                //一个按钮
                thismodal.find('a.ack-button').show().html(json[0]);
            }
            if (json.length == 2) {
                //两个按钮
                thismodal.find('a.cancel-button').show().html(json[0]);
                thismodal.find('a.confirm-button').show().html(json[1]);
            }
        },

    }


    // $ = {
    // globalVar: {}, // 内部变量， 外部不得使用(document.body 未初始化时使用；内部变量)
    // open: function (title, mask) {
    //     $.fn.loading({title: title, action: "open", mask: mask});
    // },
    // close: function () {
    //     $.fn.loading({action: "close"});
    // }
    // };
    $.alert = function (obj) {
        $.fn.alert(obj)
    }


})(window, JQUERY, window.xin)
/* $.piptops
 * @authors yaozhengxin
 * @date    2017-11-9 19:54:54
 * @version
 */
;
(function (win, $, X) {
    $.fn.poptips = function (settings, id) {
        settings = $.extend(true, {content: '正在加载...', mask: false}, settings);
        _init = function () {
            var str = '<div class="poptips-contenti-sty" id="poptipsId-div-uikl' + id + '">' +
                '<p class="poptips-text">' + settings.content + '</p>' +
                '</div>';
            $('body').append(str)
        };
        return (function () {
            _init()
            setTimeout(function () {
                if ($("#poptipsId-div-uikl" + id).length > 0) {
                    $("#poptipsId-div-uikl" + id).fadeOut(500)
                    setTimeout(function () {
                        $("#poptipsId-div-uikl" + id).remove()
                    }, 500)
                }
                ;
            }, 2000)
        })();
    };

    function createRandomId() {
        var rnd = Math.random().toString().replace('.', '');
        var date = new Date().getTime();
        return rnd + date;
    }

    $.poptips = function (content, mask) {
        var id = createRandomId()
        if ($('#poptipsId-div-uikl' + id)) {
            $.fn.poptips({content: content, mask: mask}, id);
        }
    }

})(window, JQUERY, window.xin)

